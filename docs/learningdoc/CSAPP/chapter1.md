---
title: 第一章 计算机系统漫游
date: 2022-03-25 16:38:36
permalink: /pages/10ef19/
---
# 第一章 计算机系统漫游



### 1. 信息就是位 + 上下文

- 以`hello.c`为例
- 源程序就是有0和1组成的位序列，8个位为一组，称为字节。每个字节代表程序中的某些文本字符
- 只由ASCII字符构成的文件称为文本文件，其他所有文件都为二进制文件



### 2. 程序被其他程序翻译成不同的格式

- 编译器驱动程序将源文件转换为可执行目标文件 `gcc -o hello hello.c`
- 翻译过程由四个阶段组成：
  - hello.c + 预处理器 ->
  - hello.i  + 编译器 ->
  - hello.s + 汇编器 ->
  - hello.o + printf.o + 链接器 ->
  - hello



### 3. 了解编译系统如何工作是大有益处的

- 优化程序性能
- 理解链接时出现的错误
- 避免安全漏洞



### 4. 处理器读并解释存储在内存中的指令

- shell执行目标文件`./hello`
- 系统的硬件组成
  - 总线：携带信息字节并负责在各个部件间传递，通常被设计成传送定长的字节块
  - I/O设备：输入输出设备，通过控制器或适配器与I/O总线相连
  - 主存：临时存储设备，在处理器执行程序时，用来存放程序和程序处理的数据
  - 处理器：解释或执行存储在主存中指令的引擎，核心是PC，任何时候PC都指向主存中的某条机器语言指令
    - CPU的简单操作：加载、存储、操作、跳转
- hello程序执行的过程
  - 从键盘上读取hello命令：键盘 -> 寄存器 -> 主存
  - 从磁盘加载可执行文件到主存：磁盘 -> 主存
  - 将输出字符串从存储器写到显示器：主存 -> 寄存器 -> 显示器



### 5. 高速缓存至关重要

- 主要目的：减少系统对信息的复制操作的时间
- 解决办法：在高速缓存存储器中存放可能经常访问的数据
- 原因：利用了高速缓存的局部性原理，程序具有访问局部区域里的数据和代码的趋势



### 6. 存储设备形成层级结构

- ![](https://store.southyang.cn/note/csapp/1-9.png)
- 主要思想：上一层的存储器作为低一层存储器的高速缓存



### 7. 搞作系统管理硬件

- 操作系统的基本功能

  - 防止硬件被失控的应用程序滥用
  - 向应用程序提供简单一致的机制来控制复杂而又通常大不相同的低级硬件设备

- 基本抽象概念

  - 文件是对I/O设备的抽象表示
  - 虚拟内存是对主存和磁盘I/O设备的抽象表示
  - 进程是对处理器、主存和I/O设备的抽象表示
  - 虚拟机是对整个计算机系统的抽象，包括操作系统、处理器和程序

- 进程：操作系统对正在运行的程序的一种抽象

  - 操作系统的交错运行机制称为上下文切换
  - 从一个进程转换到另一个进程是由操作系统内核管理的
  - 内核是系统管理全部进程所用的代码和数据结构的集合

- 线程：一个进程实际上可以由多个称为线程的执行单元组成，每个线程运行在进程的上下文中并共享代码和数据

- 虚拟内存：提供每个进程都在独占地使用主存的假象，是抽象概念

  - 虚拟地址空间，从下往上增大
    - 程序代码和数据：对于所有进程，代码是从同一固定地址开始的
    - 堆：在运行时动态的扩展和收缩
    - 共享库：存放共享库的代码和数据的区域
    - 栈：位于虚拟地址空间顶部，用于实现函数调用，可以在运行时动态的扩展和收缩
    - 内核虚拟内存：为内核保留，不允许应用程序读写或调用

  - 运作的基本思想：把一个进程虚拟内存的内容存储在磁盘上，然后用主存作为磁盘的高速缓存

- 文件：字节序列

  - 所有I/O设备都可以看做是文件



### 8. 系统之间利用网络通信

- 客户端和服务器的交互



### 9. 重要主题

- 系统是硬件和系统软件相互交织的集合体
- Amdahl定律：S = 1 / [ ( 1 - α ) + α / k ]  
  - k：部分性能提升比例
  - α：提升部分所需时间与总时间的比例
- 并发与并行
  - 并发：一个同时具有多个活动的系统
  - 并行：用并行来使一个系统运行得更快
  - 线程级并发：
  - 指令级并行：处理器同时执行多条指令
  - 单指令、多数据并行

