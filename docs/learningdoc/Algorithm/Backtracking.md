---
title: Backtracking
date: 2022-04-18 20:11:48
permalink: /pages/2e8fcb/
---
# å›æº¯

## é¢˜è§£æ¥æº

**æ ‡äº†ğŸ¤¦â€â™‚ï¸ğŸ¤¦â€â™‚ï¸çš„æ˜¯å®Œå…¨æŒ‰ç…§å¤§ä½¬ä»¬çš„é¢˜è§£å†™çš„**

**æ ‡äº†ğŸŒŸçš„æ˜¯ç†è§£äº†å¤§ç¥ä»¬çš„é¢˜è§£åï¼Œè‡ªå·±åˆå†™çš„**

**æ²¡æ ‡çš„æ˜¯è‡ªå·±ç£•ç£•ç»Šç»Šå†™å‡ºæ¥çš„ä½æ°´å¹³ä»£ç **



## è‡ªå·±å†™ä¸ªæ¨¡æ¿

```cpp
// æ’åˆ—é—®é¢˜
class Solution {
public:
    T res; // å®šä¹‰è¿”å›å€¼
    bool status[N]; // å®šä¹‰çŠ¶æ€æ•°ç»„ï¼Œè®°å½•å¯ç”¨æƒ…å†µ

    void dfs(T nums){
        if(check){ // åˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¡ä»¶
        	// åšç›¸å…³é€»è¾‘æ“ä½œ
            return;
        }
        for(int i = 0; i < nums.size(); i ++){ // æ’åˆ—é—®é¢˜ï¼Œä»å¤´å¼€å§‹éå†
            if(check1){ // åˆ¤æ–­å½“å‰å…ƒç´ æ˜¯å¦å¯ç”¨ï¼Œåˆ¤æ–­æ˜¯å¦æ»¡è¶³é¢˜ç›®æ¡ä»¶
                continue;
            }
            if(!status[i]){ // å¦‚æœè¯¥å­—æ¯å¯ç”¨
                status[i] = true; // æ”¹å˜çŠ¶æ€
                // åšç›¸å…³é€»è¾‘æ“ä½œ
                dfs(tiles); // è¿›å…¥æ–°ä¸€è½®éå†
                // åšä¸Šä¸€æ­¥çš„é€†æ“ä½œï¼Œæ¢å¤
                status[i] = false; // æ¢å¤çŠ¶æ€
            }
        }
    }

    int functionMain(T nums) {
        // sort(nums.begin(), nums.end()); // å¦‚æœæœ‰å»é‡éœ€æ±‚å°±å¯¹numsè¿›è¡Œæ’åºï¼Œè®©å­—æ¯æœ‰åºï¼Œæ–¹ä¾¿åç»­éå†å»é‡
        dfs(nums); // è¿›å…¥éå†
        return res; // è¿”å›res
    }
};
```

```cpp
// ç»„åˆé—®é¢˜
class Solution {
public:
    T res; // å®šä¹‰è¿”å›å€¼
    bool status[N]; // å®šä¹‰çŠ¶æ€æ•°ç»„ï¼Œè®°å½•å¯ç”¨æƒ…å†µ

    void dfs(T nums, int position){ // positionä¸ºå½“å‰éå†åˆ°çš„ä½ç½®
        if(check){ // åˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¡ä»¶
        	// åšç›¸å…³é€»è¾‘æ“ä½œ
            return;
        }
        for(int i = position; i < nums.size(); i ++){ // æ’åˆ—é—®é¢˜ï¼Œä»å¤´å¼€å§‹éå†
            if(check1){ // åˆ¤æ–­å½“å‰å…ƒç´ æ˜¯å¦å¯ç”¨ï¼Œåˆ¤æ–­æ˜¯å¦æ»¡è¶³é¢˜ç›®æ¡ä»¶
                continue;
            }
            if(!status[i]){ // å¦‚æœè¯¥å­—æ¯å¯ç”¨
                status[i] = true; // æ”¹å˜çŠ¶æ€
                // åšç›¸å…³é€»è¾‘æ“ä½œ
                dfs(tiles, i + 1); // è¿›å…¥æ–°ä¸€è½®éå†,å¯¹positionçš„å‚æ•°åšä¿®æ”¹
                // åšä¸Šä¸€æ­¥çš„é€†æ“ä½œï¼Œæ¢å¤
                status[i] = false; // æ¢å¤çŠ¶æ€
            }
        }
    }

    int functionMain(T nums) {
        // sort(nums.begin(), nums.end()); // å¦‚æœæœ‰å»é‡éœ€æ±‚å°±å¯¹numsè¿›è¡Œæ’åºï¼Œè®©å­—æ¯æœ‰åºï¼Œæ–¹ä¾¿åç»­éå†å»é‡
        dfs(nums); // è¿›å…¥éå†
        return res; // è¿”å›res
    }
};
```

```
å›æº¯ä¸‰éƒ¨æ›²
1. åˆ¤æ–­æ˜¯å¦ç»“æŸéå†+é€»è¾‘æ“ä½œ
2. è¿›å…¥å¾ªç¯
	2.1 åˆ¤æ–­æ˜¯å¦æ»¡è¶³å¯éå†æ¡ä»¶
	2.2 ä¿®æ”¹çŠ¶æ€å¹¶è¿›å…¥æ–°ä¸€è½®
	2.3 æ¢å¤çŠ¶æ€
3. ç»“æŸdfså‡½æ•°
```



## é¢˜ç›®

### 37. è§£æ•°ç‹¬ <span id="37"></span> ğŸŒŸ

**éš¾åº¦ï¼š**<font color=#ef4743>å›°éš¾</font>

**é¢˜ç›®ï¼š**

ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œé€šè¿‡å¡«å……ç©ºæ ¼æ¥è§£å†³æ•°ç‹¬é—®é¢˜ã€‚

æ•°ç‹¬çš„è§£æ³•éœ€ **éµå¾ªå¦‚ä¸‹è§„åˆ™**ï¼š

1. æ•°å­— `1-9` åœ¨æ¯ä¸€è¡Œåªèƒ½å‡ºç°ä¸€æ¬¡ã€‚
2. æ•°å­— `1-9` åœ¨æ¯ä¸€åˆ—åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚
3. æ•°å­— `1-9` åœ¨æ¯ä¸€ä¸ªä»¥ç²—å®çº¿åˆ†éš”çš„ `3x3` å®«å†…åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ï¼ˆè¯·å‚è€ƒç¤ºä¾‹å›¾ï¼‰

æ•°ç‹¬éƒ¨åˆ†ç©ºæ ¼å†…å·²å¡«å…¥äº†æ•°å­—ï¼Œç©ºç™½æ ¼ç”¨ `'.'` è¡¨ç¤ºã€‚

**ç¤ºä¾‹ï¼š**

![è§£æ•°ç‹¬ å›¾æºLeetCode](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2021/04/12/250px-sudoku-by-l2g-20050714svg.png)

```
è¾“å…¥ï¼šboard = [["5","3",".",".","7",".",".",".","."],
["6",".",".","1","9","5",".",".","."],
[".","9","8",".",".",".",".","6","."],
["8",".",".",".","6",".",".",".","3"],
["4",".",".","8",".","3",".",".","1"],
["7",".",".",".","2",".",".",".","6"],
[".","6",".",".",".",".","2","8","."],
[".",".",".","4","1","9",".",".","5"],
[".",".",".",".","8",".",".","7","9"]]
è¾“å‡ºï¼š[["5","3","4","6","7","8","9","1","2"],
["6","7","2","1","9","5","3","4","8"],
["1","9","8","3","4","2","5","6","7"],
["8","5","9","7","6","1","4","2","3"],
["4","2","6","8","5","3","7","9","1"],
["7","1","3","9","2","4","8","5","6"],
["9","6","1","5","3","7","2","8","4"],
["2","8","7","4","1","9","6","3","5"],
["3","4","5","2","8","6","1","7","9"]]
è§£é‡Šï¼šè¾“å…¥çš„æ•°ç‹¬å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå”¯ä¸€æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆå¦‚ä¸‹æ‰€ç¤ºï¼š
```

![è§£æ•°ç‹¬ç¤ºä¾‹ å›¾æºLeetCode](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2021/04/12/250px-sudoku-by-l2g-20050714_solutionsvg.png)

**æç¤ºï¼š**

- `board.length == 9`
- `board[i].length == 9`
- `board[i][j]` æ˜¯ä¸€ä½æ•°å­—æˆ–è€… `'.'`
- é¢˜ç›®æ•°æ® **ä¿è¯** è¾“å…¥æ•°ç‹¬ä»…æœ‰ä¸€ä¸ªè§£

**è§£é¢˜æ€è·¯ï¼š**

- è§£æ•°ç‹¬ç›¸å½“äºä¸€ä¸ªå¯ä»¥ä¸èµ°åˆ°å°½å¤´çš„dfs
- å¯¹äºå¸¸è§„çš„dfsé¢˜ç›®ï¼Œæˆ‘ä»¬éœ€è¦å°†æ‰€æœ‰å¯èƒ½çš„æƒ…å†µéå†ä¸€æ¬¡ï¼Œæ‰¾å…¨æ’åˆ—
- è€Œå¯¹äºè§£æ•°ç‹¬ï¼Œæˆ‘ä»¬åªéœ€è¦æ±‚å‡ºä¸€ç§è§£æ³•å°±å¯ä»¥äº†ï¼Œå› æ­¤éœ€è¦ç»´æŠ¤ä¸€ä¸ªnotcontinueæ¥åˆ¤æ–­æ˜¯å¦è·³å‡ºå¾ªç¯
- é¢˜ç›®è¦ä»ä¸‰æ–¹é¢åˆ¤æ–­æ˜¯å¦å¯ç”¨ï¼Œå³ï¼š
  - å½“å‰è¡Œæ˜¯å¦å¯ç”¨æ•°å­—xï¼Œå³`line[i][x]`æ˜¯å¦ä¸ºfalse
  - å½“å‰åˆ—æ˜¯å¦å¯ç”¨æ•°å­—xï¼Œå³`column[j][x]`æ˜¯å¦ä¸ºfalse
  - å½“å‰ä¹å®«æ ¼æ˜¯å¦å¯ç”¨æ•°å­—xï¼Œå³`block[i/3][j/3][x]`æ˜¯å¦ä¸ºfalse
- å› æ­¤æ¯æ¬¡éƒ½éœ€è¦åˆ¤æ–­ä¸‰ç§æƒ…å†µï¼š`if(!line[i][k] && !column[j][k] && !block[i / 3][j / 3][k])`
- å‰©ä¸‹çš„å°±æ˜¯ä¼ ç»Ÿdfsçš„å†…å®¹äº†

**ä»£ç ï¼š**

```cpp
class Solution {
public:
    bool line[9][9]; // è®°å½•è¡Œä¸­æ•°å­—æ˜¯å¦å¯å­˜æ”¾
    bool column[9][9]; // è®°å½•åˆ—ä¸­æ•°å­—æ˜¯å¦å¯å­˜æ”¾
    bool block[3][3][9]; // è®°å½•ä¹å®«æ ¼å†…æ•°å­—æ˜¯å¦å¯å­˜æ”¾
    bool notcontinue; // è®°å½•æ˜¯å¦éœ€è¦ç»§ç»­éå†
    vector<pair<int,int>> emptyspaces; // è®°å½•éœ€è¦å­˜æ”¾æ•°å­—çš„åœ°æ–¹

    void dfs(vector<vector<char>>& board, int depth){
        if(depth == emptyspaces.size()){ // å¦‚æœå°†éœ€è¦å­˜æ”¾æ•°å­—çš„åœ°æ–¹éå†å®Œæˆï¼Œç»“æŸå¾ªç¯
            notcontinue = true;
            return;
        }

        auto [i, j] = emptyspaces[depth]; // è·å–æ•°å­—å­˜æ”¾åœ°ç‚¹
        for(int k = 0; k < 9 && !notcontinue; k ++){
            if(!line[i][k] && !column[j][k] && !block[i / 3][j / 3][k]){ // å¦‚æœå½“å‰ä½ç½®å¯ä»¥å­˜æ”¾
                line[i][k] = column[j][k] = block[i / 3][j / 3][k] = true; // ä¿®æ”¹çŠ¶æ€ä¸ºä¸å¯ç”¨
                board[i][j] = k + '0' + 1; // æ”¹å˜boardå¯¹åº”ä½ç½®
                dfs(board, depth + 1); // åœ¨å½“å‰ä¿®æ”¹çš„åŸºç¡€ä¸Šç»§ç»­dfs
                line[i][k] = column[j][k] = block[i / 3][j / 3][k] = false; // ä¿®æ”¹çŠ¶æ€ä¸ºå¯ç”¨
            }
        }
    }

    void solveSudoku(vector<vector<char>>& board) {
        for(int i = 0; i < board.size(); i ++){ // éå†boardå¾—åˆ°åˆå§‹çš„lineã€columnã€blockçŠ¶æ€
            for(int j = 0; j < board[0].size(); j ++){
                if(board[i][j] == '.'){
                    emptyspaces.push_back({i ,j});
                }
                else{
                    int temp = board[i][j] - '0' - 1;
                    line[i][temp] = column[j][temp] = block[i / 3][j / 3][temp] = true;
                }
            }
        }
        dfs(board, 0);
    }
};
```



### 46. å…¨æ’åˆ— <span id="46"></span>

**éš¾åº¦ï¼š**<font color=#ffa119>ä¸­ç­‰</font>

**é¢˜ç›®ï¼š**

ç»™å®šä¸€ä¸ªä¸å«é‡å¤æ•°å­—çš„æ•°ç»„ `nums` ï¼Œè¿”å›å…¶ *æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ—* ã€‚ä½ å¯ä»¥ **æŒ‰ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3]
è¾“å‡ºï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]
```

```
è¾“å…¥ï¼šnums = [0,1]
è¾“å‡ºï¼š[[0,1],[1,0]]
```

```
è¾“å…¥ï¼šnums = [1]
è¾“å‡ºï¼š[[1]]
```

**æç¤ºï¼š**

- `1 <= nums.length <= 6`
- `-10 <= nums[i] <= 10`
- `nums` ä¸­çš„æ‰€æœ‰æ•´æ•° **äº’ä¸ç›¸åŒ**

**è§£é¢˜æ€è·¯ï¼š**

- ç›´æ¥æ·±åº¦ä¼˜å…ˆéå†ï¼Œèµ°åˆ°å¤´å°±å¾€å›èµ°ä¸€ä¸ªï¼Œç„¶åç»§ç»­å¾€ä¸‹èµ°
- è¦æ³¨æ„çš„æ˜¯æ ‡æ³¨æ•°æ®å¯ç”¨çŠ¶æ€

**ä»£ç ï¼š**

```cpp
class Solution {
public:
    void dfs(int depth, vector<int>& nums, vector<bool>& status, vector<int>& temp, vector<vector<int> >& res){
        if(depth == nums.size()){ // å¦‚æœå…¨éƒ¨éå†ï¼Œå‹å…¥reså¹¶è¿”å›
            res.push_back(temp);
            return;
        }
        for(int i = 0; i < nums.size(); i ++){
            if(!status[i]){
            	temp.push_back(nums[i]); // å‹å…¥temp
            	status[i] = true; // æ”¹å˜çŠ¶æ€ä¸ºä¸å¯ç”¨

            	dfs(depth + 1, nums, status, temp, res); // å¯¹ä¸‹ä¸€ä¸ªä½ç½®è¿›è¡Œdfs

            	temp.pop_back(); // å¼¹å‡ºæœ«å°¾
            	status[i] = false; // æ”¹å˜çŠ¶æ€ä¸ºå¯ç”¨
	    	}
        }
    }

    vector<vector<int> > permute(vector<int>& nums) {
	    int len = nums.size();
        vector<vector<int> > res;
        vector<int> temp;
        vector<bool> status(len, false);
        dfs(0, nums, status, temp, res); // æ·±åº¦ï¼Œnumsæ•°æ®ï¼ŒstatusçŠ¶æ€æ•°ç»„ï¼Œtempä¸´æ—¶æ•°ç»„ï¼Œresè¿”å›æ•°ç»„
        return res;
    }
};
```



### 47. å…¨æ’åˆ—II <span id="47"></span>

**éš¾åº¦ï¼š**<font color=#ffa119>ä¸­ç­‰</font>

**é¢˜ç›®ï¼š**

ç»™å®šä¸€ä¸ªå¯åŒ…å«é‡å¤æ•°å­—çš„åºåˆ— `nums` ï¼Œ***æŒ‰ä»»æ„é¡ºåº*** è¿”å›æ‰€æœ‰ä¸é‡å¤çš„å…¨æ’åˆ—ã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼šnums = [1,1,2]
è¾“å‡ºï¼š
[[1,1,2],
 [1,2,1],
 [2,1,1]]
```

```
è¾“å…¥ï¼šnums = [1,2,3]
è¾“å‡ºï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]
```

**æç¤ºï¼š**

- `1 <= nums.length <= 8`
- `-10 <= nums[i] <= 10`

**è§£é¢˜æ€è·¯ï¼š**

- å¤§ä½“æ€è·¯å’Œ46é¢˜æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯å¢åŠ äº†ä¸€ä¸ªå»é‡çš„åˆ¤æ–­
- è€ƒè™‘å¦‚ä½•å»é‡
  - åŒä¸€ä¸ªä½ç½®ï¼Œç›¸åŒçš„å…ƒç´ åªèƒ½è®°å½•ä¸€æ¬¡ï¼Œè®°å½•ä¸¤æ¬¡åˆ™æœ‰é‡å¤
  - ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œæˆ‘ä»¬è¦è®°å½•å½“å‰ä½ç½®çš„å¼¹å‡ºæ•°æ®è®°å½•ä¸‹æ¥
  - å¦‚æœæˆ‘ä»¬è®°å½•æ‰€æœ‰çš„å¼¹å‡ºæ•°æ®ï¼Œéœ€è¦é¢å¤–çš„ç©ºé—´O(n)æ¥ä¿å­˜
  - ç”¨æ—¶é—´æ¢ç©ºé—´ï¼šå¯¹numsæ•°ç»„æ’åºï¼Œè¿™æ ·é‡å¤æ•°æ®å°±ä¼šæŒ¨ç€å‡ºç°ï¼Œåªéœ€è¦ç»´æŠ¤ä¸€ä¸ªå¸¸æ•°ç©ºé—´å°±å¯ä»¥è®°å½•å¼¹å‡ºæ•°æ®

**ä»£ç ï¼š**

```cpp
class Solution {
public:
    void dfs(int depth, vector<int>& nums, vector<bool>& status, vector<int>& temp, vector<vector<int> >& res){
        if(depth == nums.size()){ // å¦‚æœå…¨éƒ¨éå†ï¼Œå‹å…¥reså¹¶è¿”å›
            res.push_back(temp);
            return;
        }
        int out = 20; // è®°å½•ä¸€ä¸ªæ•°æ®èŒƒå›´ä¹‹å¤–çš„æ•°ä½œä¸ºout
        for(int i = 0; i < nums.size(); i ++){
            if(!status[i] && nums[i] != out){ // å¦‚æœå½“å‰è¦å‹å…¥çš„æ•°å’Œåˆšå¼¹å‡ºçš„æ•°ç›¸åŒï¼Œåˆ™ä¸èƒ½å‹å…¥
                temp.push_back(nums[i]); // å‹å…¥temp
                status[i] = true; // æ”¹å˜çŠ¶æ€ä¸ºä¸å¯ç”¨

                dfs(depth + 1, nums, status, temp, res);

                out = temp.back(); // å–å‡ºæœ€åä¸€ä¸ªæ•°æ®
                temp.pop_back(); // å¼¹å‡ºæœ«å°¾
                status[i] = false; // æ”¹å˜çŠ¶æ€ä¸ºå¯ç”¨
            }
        }
    }
    vector<vector<int>> permuteUnique(vector<int>& nums) {
        int len = nums.size();
        sort(nums.begin(), nums.end());
        vector<int> temp;
        vector<vector<int>> res;
        vector<bool> status(len, false);
        dfs(0, nums, status, temp, res); // æ·±åº¦ï¼Œnumsæ•°æ®ï¼ŒstatusçŠ¶æ€æ•°ç»„ï¼Œtempä¸´æ—¶æ•°ç»„ï¼Œresè¿”å›æ•°ç»„
        return res;
    }
};
```



### 51. Nçš‡å <span id="51"></span>

**éš¾åº¦ï¼š**<font color=#ef4743>å›°éš¾</font>

**é¢˜ç›®ï¼š**

**n çš‡åé—®é¢˜** ç ”ç©¶çš„æ˜¯å¦‚ä½•å°† `n` ä¸ªçš‡åæ”¾ç½®åœ¨ `nÃ—n` çš„æ£‹ç›˜ä¸Šï¼Œå¹¶ä¸”ä½¿çš‡åå½¼æ­¤ä¹‹é—´ä¸èƒ½ç›¸äº’æ”»å‡»ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` ï¼Œè¿”å›æ‰€æœ‰ä¸åŒçš„ **n çš‡åé—®é¢˜** çš„è§£å†³æ–¹æ¡ˆã€‚

æ¯ä¸€ç§è§£æ³•åŒ…å«ä¸€ä¸ªä¸åŒçš„ **n çš‡åé—®é¢˜** çš„æ£‹å­æ”¾ç½®æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆä¸­ `'Q'` å’Œ `'.'` åˆ†åˆ«ä»£è¡¨äº†çš‡åå’Œç©ºä½ã€‚

**ç¤ºä¾‹ï¼š**

![Nçš‡å å›¾æºLeetCode](https://assets.leetcode.com/uploads/2020/11/13/queens.jpg)

```
è¾“å…¥ï¼šn = 4
è¾“å‡ºï¼š[[".Q..","...Q","Q...","..Q."],["..Q.","Q...","...Q",".Q.."]]
è§£é‡Šï¼šå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ4 çš‡åé—®é¢˜å­˜åœ¨ä¸¤ä¸ªä¸åŒçš„è§£æ³•ã€‚
```

```
è¾“å…¥ï¼šn = 1
è¾“å‡ºï¼š[["Q"]]
```

**æç¤ºï¼š**

- `1 <= n <= 9`

**è§£é¢˜æ€è·¯ï¼š**

- çš‡åä¸èƒ½å‡ºç°åœ¨åŒä¸€åˆ—ã€åŒä¸€è¡Œã€åŒä¸€å¯¹è§’çº¿
- é‚£ä¹ˆæˆ‘ä»¬æŒ‰è¡Œè¿›è¡Œæ‘†æ”¾ï¼Œå°±ä¸ç”¨è€ƒè™‘åŒä¸€è¡Œçš„é—®é¢˜ï¼Œåªéœ€è¦è€ƒè™‘åˆ—å’Œå¯¹è§’çº¿
  - å¯¹äºåˆ—ï¼šå®šä¹‰`column[i]`æ¥å­˜æ”¾ç¬¬`i`åˆ—æ˜¯å¦æ‘†æ”¾äº†çš‡åï¼Œåˆå§‹çŠ¶æ€ä¸ºfalse
  - å¯¹äºå¯¹è§’çº¿ï¼Œåˆ†ä¸ºå·¦ä¸Šåˆ°å³ä¸‹å’Œå³ä¸Šåˆ°å·¦ä¸‹
    - å·¦ä¸Šåˆ°å³ä¸‹ï¼Œå®šä¹‰`left[n-i+j]`æ¥å­˜æ”¾ç¬¬`i`è¡Œ`j`åˆ—ä½ç½®å¯¹åº”çš„å¯¹è§’çº¿æ˜¯å¦æ‘†æ”¾äº†çš‡åï¼Œåˆå§‹çŠ¶æ€ä¸ºfalse
    - å³ä¸Šåˆ°å·¦ä¸‹ï¼Œå®šä¹‰`right[i+j]`æ¥å­˜æ”¾ç¬¬`i`è¡Œ`j`åˆ—ä½ç½®å¯¹åº”çš„å¯¹è§’çº¿æ˜¯å¦æ‘†æ”¾äº†çš‡åï¼Œåˆå§‹çŠ¶æ€ä¸ºfalse
  - å¯¹è§’çº¿å®šä¹‰è§„åˆ™ï¼š
    - ä¸éš¾å‘ç°ï¼Œ`n-i+j`è®¡ç®—å‡ºçš„å·¦ä¸Šå³ä¸‹å¯¹è§’çº¿çš„å€¼éƒ½ç›¸åŒ
    - åŒç†ï¼Œ`i+j`è®¡ç®—å‡ºçš„å³ä¸Šå·¦ä¸‹å¯¹è§’çº¿çš„å€¼ä¹Ÿéƒ½ç›¸åŒ
- å¦‚æœæ»¡è¶³äº†è¡Œã€åˆ—ã€å¯¹è§’çº¿æ¡ä»¶ï¼Œé‚£ä¹ˆå°±åœ¨å½“å‰ä½ç½®æ‘†æ”¾çš‡åå¹¶æ”¹å˜ä½ç½®çŠ¶æ€
- ç»§ç»­ä»å½“å‰ä½ç½®å‡ºå‘è¿›è¡Œä¸‹ä¸€è¡Œçš„éå†
- ç»“æŸäº†å½“å‰ä½ç½®çš„éå†åï¼Œæ¢å¤ä½ç½®çŠ¶æ€ï¼Œæ‰«æå½“å‰è¡Œçš„ä¸‹ä¸€ä¸ªä½ç½®

**ä»£ç ï¼š**

```cpp
class Solution {
public:
    bool column[10];
    bool left[20];
    bool right[20];
    void dfs(int depth, int n, vector<vector<string>>& res, vector<string>& temp){
        if(depth == n){ // æ»¡è¶³æ¡ä»¶ï¼Œå°†tempå‹å…¥res
            res.push_back(temp);
            return;
        }
        for(int i = 0; i < n; i ++){
            if(!column[i] && !left[n - (depth - i)] && !right[depth + i]){
                column[i] = left[n - depth + i] = right[depth + i] = true; // æ”¹å˜çŠ¶æ€ä¸ºä¸å¯ç”¨
                temp[depth][i] = 'Q'; // è®°å½•å½“å‰ä½ç½®ä¸º Q

                dfs(depth + 1, n, res, temp); // è¿›å…¥ä¸‹ä¸€è¡Œ

                column[i] = left[n - depth + i] = right[depth + i] = false; // æ”¹å˜çŠ¶æ€ä¸ºå¯ç”¨
                temp[depth][i] = '.'; // æ¢å¤å½“å‰ä½ç½®ä¸º . 
            }
        }
    }

    vector<vector<string>> solveNQueens(int n) {
        vector<vector<string>> res; // è¿”å›å€¼
        vector<string> temp(n, string(n, '.')); // ä¸´æ—¶å­˜æ”¾æ‘†æ”¾æƒ…å†µ

        dfs(0, n, res, temp);
        return res;
    }   
};
```



### 52. Nçš‡åII <span id="52"></span>

**éš¾åº¦ï¼š**<font color=#ef4743>å›°éš¾</font>

**é¢˜ç›®ï¼š**

**n çš‡åé—®é¢˜** ç ”ç©¶çš„æ˜¯å¦‚ä½•å°† `n` ä¸ªçš‡åæ”¾ç½®åœ¨ `n Ã— n` çš„æ£‹ç›˜ä¸Šï¼Œå¹¶ä¸”ä½¿çš‡åå½¼æ­¤ä¹‹é—´ä¸èƒ½ç›¸äº’æ”»å‡»ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` ï¼Œè¿”å› **n çš‡åé—®é¢˜** ä¸åŒçš„è§£å†³æ–¹æ¡ˆçš„æ•°é‡ã€‚

**ç¤ºä¾‹ï¼š**

![Nçš‡å å›¾æºLeetCode](https://assets.leetcode.com/uploads/2020/11/13/queens.jpg)

```
è¾“å…¥ï¼šn = 4
è¾“å‡ºï¼š2
è§£é‡Šï¼šå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ4 çš‡åé—®é¢˜å­˜åœ¨ä¸¤ä¸ªä¸åŒçš„è§£æ³•ã€‚
```

```
è¾“å…¥ï¼šn = 1
è¾“å‡ºï¼š1
```

**æç¤ºï¼š**

- `1 <= n <= 9`

**è§£é¢˜æ€è·¯ï¼š**

åŒ51é¢˜ Nçš‡åçš„æ€è·¯ï¼Œåªæ˜¯æŠŠæ±‚ç»“æœå˜æˆäº†æ±‚ç»“æœä¸ªæ•°

**ä»£ç ï¼š**

```cpp
class Solution {
public:
    bool column[10];
    bool left[20], right[20];
    int res = 0;

    void dfs(int depth, int n){
        if(depth == n){ // åªéœ€è¦è®¡æ•°å°±å¥½
            res ++;
            return;
        }

        for(int i = 0; i < n; i ++){
            if(!column[i] && !left[n - depth + i] && !right[depth + i]){ // åˆ¤æ–­æ˜¯å¦å¯ç”¨
                column[i] = left[n - depth + i] = right[depth + i] = true; // æ”¹å˜çŠ¶æ€ä¸ºä¸å¯ç”¨
                dfs(depth + 1, n); // è¿›å…¥ä¸‹ä¸€è¡Œ
                column[i] = left[n - depth + i] = right[depth + i] = false; // æ”¹å˜çŠ¶æ€ä¸ºå¯ç”¨
            }
        }
    }

    int totalNQueens(int n) {
        dfs(0, n);
        return res;
    }
};
```



### 77. ç»„åˆ <span id="77"></span>

**éš¾åº¦ï¼š**<font color=#ffa119>ä¸­ç­‰</font>

**é¢˜ç›®ï¼š**

ç»™å®šä¸¤ä¸ªæ•´æ•° `n` å’Œ `k`ï¼Œè¿”å›èŒƒå›´ `[1, n]` ä¸­æ‰€æœ‰å¯èƒ½çš„ `k` ä¸ªæ•°çš„ç»„åˆã€‚

ä½ å¯ä»¥æŒ‰ **ä»»ä½•é¡ºåº** è¿”å›ç­”æ¡ˆã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼šn = 4, k = 2
è¾“å‡ºï¼š
[
  [2,4],
  [3,4],
  [2,3],
  [1,2],
  [1,3],
  [1,4],
]
```

```
è¾“å…¥ï¼šn = 1, k = 1
è¾“å‡ºï¼š[[1]]
```

**æç¤ºï¼š**

- `1 <= n <= 20`
- `1 <= k <= n`

**è§£é¢˜æ€è·¯ï¼š**

- å‰é¢åšçš„éƒ½æ˜¯å…¨æ’åˆ—é—®é¢˜ï¼Œè¦æ±‚å‡ºç›¸å…³é—®é¢˜çš„æ‰€æœ‰æƒ…å†µ
- è¿™é“é¢˜æ˜¯ç»„åˆé—®é¢˜ï¼Œè¦é™¤å»é‡å¤çš„æƒ…å†µã€‚å› æ­¤æˆ‘ä»¬ä¸èƒ½æ²¿ç”¨å‰é¢ä»0åˆ°nçš„éå†æ–¹æ³•
- å¦‚æœä»0åˆ°néå†ï¼Œä¼šå‡ºç°
  - ç¬¬ä¸€ä¸ªæ•°æ˜¯0ï¼Œè®°å½•äº†æ‰€æœ‰ä»¥0å¼€å¤´çš„æƒ…å†µ
  - å°†0å¼¹å‡ºï¼Œä»¥1ä¸ºç¬¬ä¸€ä¸ªæ•°ï¼Œåˆè¦è®°å½•æ‰€æœ‰ä»¥1å¼€å¤´çš„æƒ…å†µï¼Œå¿…ç„¶ä¼šé‡å¤è®°å½•0
  - å› æ­¤ä¼šå‡ºç°é‡å¤æƒ…å†µ
- ä¸ºäº†é¿å…é‡å¤ï¼Œæˆ‘ä»¬ä¸èƒ½è®©åšè¿‡å¼€å¤´çš„æ•°å­—å†å‡ºç°åœ¨æ‰«æåˆ—è¡¨é‡Œ
  - æ‰€ä»¥ä¸ä½¿ç”¨forå¾ªç¯ï¼Œè€Œæ˜¯ç”¨ä¸¤æ¬¡é€’å½’è°ƒç”¨
  - ç¬¬ä¸€æ¬¡ä¸ºä½¿ç”¨å½“å‰æ•°
  - ç¬¬äºŒæ¬¡ä¸ºä¸ä½¿ç”¨å½“å‰æ•°
- ç”±æ­¤æˆ‘ä»¬è¾¾æˆäº†ç»„åˆæ•°çš„è¦æ±‚

**ä»£ç ï¼š**

```cpp
class Solution {
public:
    void dfs(vector<vector<int>>& res, vector<int>& temp, int depth, int k, int n){
        if(temp.size() + n - depth + 1 < k){
            return;
        }
        if(temp.size() == k){
            res.push_back(temp);
            return;
        }
        // ç»„åˆä¸æ˜¯æ’åˆ—ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨å¾ªç¯ï¼Œå¦åˆ™ä¼šå‡ºç°é‡å¤çš„æƒ…å†µ
        temp.push_back(depth);
        dfs(res, temp, depth + 1, k, n);

        temp.pop_back();
        dfs(res, temp, depth + 1, k, n);
    }

    vector<vector<int>> combine(int n, int k) {
        vector<vector<int>> res;
        vector<int> temp;
        
        dfs(res, temp, 1, k, n);
        return res;
    }
};
```



### 78. å­é›†<span id="78"></span>

**éš¾åº¦ï¼š**<font color=#ffa119>ä¸­ç­‰</font>

**é¢˜ç›®ï¼š**

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œæ•°ç»„ä¸­çš„å…ƒç´  **äº’ä¸ç›¸åŒ** ã€‚è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚

è§£é›† **ä¸èƒ½** åŒ…å«é‡å¤çš„å­é›†ã€‚ä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›è§£é›†ã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3]
è¾“å‡ºï¼š[[],[1],[2],[1,2],[3],[1,3],[2,3],[1,2,3]]
```

```
è¾“å…¥ï¼šnums = [0]
è¾“å‡ºï¼š[[],[0]]
```

**æç¤ºï¼š**

- `1 <= nums.length <= 10`
- `-10 <= nums[i] <= 10`
- `nums` ä¸­çš„æ‰€æœ‰å…ƒç´  **äº’ä¸ç›¸åŒ**

**è§£é¢˜æ€è·¯ï¼š**

- å­é›†é—®é¢˜ï¼Œå±äºç»„åˆç±»é—®é¢˜ï¼Œè€Œä¸”ä¸éœ€è¦åŠ ä»»ä½•çš„åˆ¤æ–­æ¡ä»¶ï¼Œéå†åˆ°åº•å°±å¯ä»¥äº†
- æ¯æ¬¡ä¼ å…¥ä¸€ä¸ªå½“å‰ä½ç½®å°±å¥½
- åœ¨`dfs`çš„å¼€å¤´å°†`temp`å‹å…¥`res`ï¼Œä¹‹åå†å¯¹`temp`åšä¿®æ”¹

**ä»£ç ï¼š**

```cpp
class Solution {
public:
    vector<vector<int>> res;
    vector<int> temp;

    void dfs(vector<int>& nums, int position){
        res.push_back(temp); // æ¯æ¬¡éå†å¼€å§‹å‰å°†tempå‹å…¥resï¼ŒåŒæ—¶ä¹Ÿå°±å‹å…¥äº†ä¸€ä¸ª[]
        for(int i = position; i < nums.size(); i ++){ // ç»„åˆé—®é¢˜ï¼Œä»å½“å‰ä½ç½®å¼€å§‹éå†
            temp.push_back(nums[i]); // å‹å…¥temp
            dfs(nums, i + 1); // è¿›å…¥æ–°ä¸€è½®éå†
            temp.pop_back(); // å¼¹å‡º
        }
    }

    vector<vector<int>> subsets(vector<int>& nums) {
        dfs(nums, 0);
        return res;
    }
};
```



### 79. å•è¯æœç´¢<span id="79"></span> ğŸŒŸ

**éš¾åº¦ï¼š**<font color=#ffa119>ä¸­ç­‰</font>

**é¢˜ç›®ï¼š**

ç»™å®šä¸€ä¸ª `m x n` äºŒç»´å­—ç¬¦ç½‘æ ¼ `board` å’Œä¸€ä¸ªå­—ç¬¦ä¸²å•è¯ `word` ã€‚å¦‚æœ `word` å­˜åœ¨äºç½‘æ ¼ä¸­ï¼Œè¿”å›`true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

å•è¯å¿…é¡»æŒ‰ç…§å­—æ¯é¡ºåºï¼Œé€šè¿‡ç›¸é‚»çš„å•å…ƒæ ¼å†…çš„å­—æ¯æ„æˆï¼Œå…¶ä¸­â€œç›¸é‚»â€å•å…ƒæ ¼æ˜¯é‚£äº›æ°´å¹³ç›¸é‚»æˆ–å‚ç›´ç›¸é‚»çš„å•å…ƒæ ¼ã€‚åŒä¸€ä¸ªå•å…ƒæ ¼å†…çš„å­—æ¯ä¸å…è®¸è¢«é‡å¤ä½¿ç”¨ã€‚

**ç¤ºä¾‹ï¼š**

![å•è¯æœç´¢ å›¾æºLeetCode](https://assets.leetcode.com/uploads/2020/11/04/word2.jpg)

```
è¾“å…¥ï¼šboard = [["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], word = "ABCCED"
è¾“å‡ºï¼štrue
```

![å•è¯æœç´¢ å›¾æºLeetCode](https://assets.leetcode.com/uploads/2020/11/04/word-1.jpg)

```
è¾“å…¥ï¼šboard = [["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], word = "SEE"
è¾“å‡ºï¼štrue
```

![å•è¯æœç´¢ å›¾æºLeetCode](https://assets.leetcode.com/uploads/2020/10/15/word3.jpg)

```
è¾“å…¥ï¼šboard = [["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], word = "ABCB"
è¾“å‡ºï¼šfalse
```

**æç¤ºï¼š**

- `m == board.length`
- `n = board[i].length`
- `1 <= m, n <= 6`
- `1 <= word.length <= 15`
- `board` å’Œ `word` ä»…ç”±å¤§å°å†™è‹±æ–‡å­—æ¯ç»„æˆ

**è¿›é˜¶ï¼š**ä½ å¯ä»¥ä½¿ç”¨æœç´¢å‰ªæçš„æŠ€æœ¯æ¥ä¼˜åŒ–è§£å†³æ–¹æ¡ˆï¼Œä½¿å…¶åœ¨ `board` æ›´å¤§çš„æƒ…å†µä¸‹å¯ä»¥æ›´å¿«è§£å†³é—®é¢˜ï¼Ÿ

**è§£é¢˜æ€è·¯ï¼š**

åˆ·é¢˜å¤ªå°‘ï¼Œå›æº¯ç›¸å…³çš„é¢˜ç›®ä¸€ä¸‹å­æƒ³ä¸å‡ºæ–¹æ³•ï¼Œè¿™ä¸ªé¢˜æ˜¯å®Œå…¨çœ‹äº†å®˜æ–¹é¢˜è§£ğŸ¤¦â€â™‚ï¸

é¦–å…ˆï¼Œè¦åœ¨boardä¸­æ‰¾åˆ°å’Œwordç›¸åŒ¹é…çš„åºåˆ—ï¼Œéœ€è¦å°†boardå®Œå…¨éå†ä¸€æ¬¡ï¼Œå¯¹äºæ¯ä¸€ä¸ªå­—ç¬¦éƒ½åº”è¯¥å°è¯•ä½œä¸ºåºåˆ—çš„å¼€å¤´å»æ£€æŸ¥ã€‚

å› æ­¤æˆ‘ä»¬éœ€è¦æ±‚å‡ºboardçš„è¡Œæ•°å’Œåˆ—å‡ºï¼Œç„¶åå¯¹boardè¿›è¡Œéå†ï¼Œæ£€æŸ¥æ¯ä¸€ä¸ªå­—ç¬¦æ˜¯å¦å¯ä»¥ä½œä¸ºåºåˆ—çš„é¦–å­—æ¯

å¦‚æœå½“å‰å­—æ¯æ»¡è¶³äº†ä½œä¸ºé¦–å­—æ¯çš„æ¡ä»¶ï¼Œé‚£ä¹ˆæ²¿ç€å½“å‰å­—æ¯ç»§ç»­æœç´¢ï¼š

- è§„å®šå››ä¸ªæ–¹å‘ï¼Œå³ä¸Šä¸‹å·¦å³
- å¯¹äºå½“å‰å­—æ¯ï¼Œè¦å°†å››ä¸ªæ–¹å‘å…¨éƒ¨æ£€æŸ¥ä¸€æ¬¡ï¼Œçœ‹æ˜¯å¦æ»¡è¶³åºåˆ—ä¸‹ä¸€ä¸ªå­—æ¯çš„éœ€æ±‚
- æ»¡è¶³ï¼Œæ²¿æ–°å­—æ¯ç»§ç»­æœç´¢å››ä¸ªæ–¹å‘ï¼›ä¸æ»¡è¶³ï¼Œæ¢ä¸‹ä¸€ä¸ªæ–¹å‘
- é‡å¤ä¸Šè¿°æ“ä½œè‡³æœç´¢å®Œæ¯•

é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å®šä¹‰`check`å‡½æ•°æ¥åˆ¤æ–­æ˜¯å¦å¯ä»¥æ²¿å½“å‰å­—æ¯èµ°ä¸‹å»ï¼Œé‡å¤è°ƒç”¨å³å¯

è¦æ³¨æ„çš„æ˜¯ï¼šéœ€è¦å®šä¹‰ä¸€ä¸ª`visited`æ•°ç»„æ¥ä¿å­˜åœ¨å½“å‰æœç´¢ä¸­ï¼Œ`board`ä¸­å­—æ¯æ˜¯å¦è¢«ä½¿ç”¨è¿‡ï¼›é™¤æ­¤ä¹‹å¤–ï¼Œæ»¡è¶³æ¡ä»¶ï¼Œéœ€è¦å°†å­—æ¯æ ‡è®°ä¸º`true`ï¼Œåœ¨è¿›å…¥ä¸‹ä¸€ä¸ªå­—æ¯çš„æ£€æŸ¥æ—¶ï¼Œè¦å°†å½“å‰å­—æ¯çš„ä½¿ç”¨æƒ…å†µå˜ä¸º`false`ï¼Œä»¥ä¾¿åç»­éå†ä½¿ç”¨

æ—¶é—´å¤æ‚åº¦ä¸ºO(*mn* * *3^L*)  ï¼ˆå°±æ˜¯DFSï¼‰

**ä»£ç ï¼š**

```cpp
class Solution {
public:
    vector<pair<int, int>> directions{{0, 1}, {0, -1}, {1, 0}, {-1, 0}};

    bool dfs(vector<vector<char>>& board, vector<vector<bool>>& visited, int i, int j, string word, int k){
        if(k == word.length() - 1){ // å¦‚æœå…¨éƒ¨éå†å®Œæˆï¼Œè¯´æ˜æˆåŠŸ
            return true;
        }

        for(const auto& dir: directions){
            int newi = i + dir.first, newj = j + dir.second; // æ‰¾ä¸€ä¸ªæ–¹å‘
            if(newi >= 0 && newi < board.size() && newj >= 0 && newj < board[0].size()){
                if(!visited[newi][newj] && board[newi][newj] == word[k + 1]){ // æ¡ä»¶åˆ¤æ–­
                    visited[newi][newj] = true; // æ”¹å˜çŠ¶æ€ä½
                    bool res = dfs(board, visited, newi, newj, word, k + 1); // è¿›å…¥æ–°ä¸€è½®éå†
                    visited[newi][newj] = false; // æ¢å¤çŠ¶æ€ä½
                    if(res){
                        return true;
                    }
                }
            }
        }
        return false;
    }
    bool exist(vector<vector<char>>& board, string word) {
        int m = board.size();
        int n = board[0].size();
        vector<vector<bool>> visited(m, vector<bool>(n));
        for(int i = 0; i < m; ++ i){ // å¯»æ‰¾åˆé€‚çš„é¦–å­—æ¯ä½ç½®
            for(int j = 0; j < n; ++ j){
                if(board[i][j] == word[0]){ // å¦‚æœå½“å‰é¦–å­—æ¯æ»¡è¶³æ¡ä»¶ï¼Œè¿›å…¥æ–°ä¸€è½®éå†
                    visited[i][j] = true; // æ”¹å˜çŠ¶æ€ä½
                    bool res = dfs(board, visited, i, j, word, 0); // éå†
                    visited[i][j] = false; // æ¢å¤çŠ¶æ€ä½
                    if(res){ // åˆ¤æ–­æ˜¯å¦æˆåŠŸ
                        return true;
                    }
                }
            }
        }
        return false;
    }
};
```



### 90. å­é›†II<span id="90"></span>

**éš¾åº¦ï¼š**<font color=#ffa119>ä¸­ç­‰</font>

**é¢˜ç›®ï¼š**

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«é‡å¤å…ƒç´ ï¼Œè¯·ä½ è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚

è§£é›† **ä¸èƒ½** åŒ…å«é‡å¤çš„å­é›†ã€‚è¿”å›çš„è§£é›†ä¸­ï¼Œå­é›†å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** æ’åˆ—ã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,2]
è¾“å‡ºï¼š[[],[1],[1,2],[1,2,2],[2],[2,2]]
```

```
è¾“å…¥ï¼šnums = [0]
è¾“å‡ºï¼š[[],[0]]
```

**æç¤ºï¼š**

- `1 <= nums.length <= 10`
- `-10 <= nums[i] <= 10`

**è§£é¢˜æ€è·¯ï¼š**

åœ¨[78 å­é›†](#78)çš„åŸºç¡€ä¸Šï¼Œå¤šä¸¤æ­¥æ“ä½œ

- å¤šä¸€æ­¥æ’åºï¼Œå³æŒ‰é¡ºåºæ’åˆ—ï¼Œæ–¹ä¾¿åç»­æ±‚è§£ï¼›
- å†å¤šä¸€æ­¥åˆ¤æ–­å½“å‰éå†å­—æ¯å’Œå‰ä¸€ä¸ªæ˜¯å¦ç›¸åŒä»¥åŠå‰ä¸€ä¸ªå­—æ¯æ˜¯å¦åœ¨ä½¿ç”¨ä¸­
  - å¦‚æœç›¸åŒä¸”å‰ä¸€ä¸ªå­—æ¯æ²¡æœ‰åœ¨ä½¿ç”¨ï¼Œé‚£ä¹ˆå½“å‰å­—æ¯ä¸èƒ½ä½¿ç”¨ï¼Œå› ä¸ºæ‰€æœ‰çš„åªå­˜åœ¨ä¸€ä¸ªè¯¥å­—æ¯çš„å­é›†å·²ç»å…¨éƒ¨è¢«å‰ä¸€ä¸ªéå†åˆ°äº†
  - åä¹‹ï¼Œå½“å‰å­—æ¯å¯ä»¥ä½¿ç”¨

**ä»£ç ï¼š**

```cpp
class Solution {
public:
    vector<vector<int>> res;
    vector<int> temp;
    bool status[10];

    void dfs(vector<int>& nums, int position){
        res.push_back(temp); // å‹å…¥ç©º

        for(int i = position; i < nums.size(); i ++){
            if(i > 0 && nums[i] == nums[i - 1] && !status[i - 1]){
                continue;
            }
            temp.push_back(nums[i]); // å‹å…¥temp
            status[i] = true; // æ”¹å˜çŠ¶æ€ä½
            dfs(nums, i + 1); // è¿›å…¥æ–°ä¸€è½®éå†
            status[i] = false; // æ¢å¤çŠ¶æ€ä½
            temp.pop_back(); // å¼¹å‡º
        }
    }

    vector<vector<int>> subsetsWithDup(vector<int>& nums) {
        sort(nums.begin(), nums.end()); // æ’åº
        
        dfs(nums, 0);
        return res;
    }
};
```



### 93. å¤åŸIPåœ°å€ <span id="93"></span>

**éš¾åº¦ï¼š**<font color=#ffa119>ä¸­ç­‰</font>

**é¢˜ç›®ï¼š**

**æœ‰æ•ˆ IP åœ°å€** æ­£å¥½ç”±å››ä¸ªæ•´æ•°ï¼ˆæ¯ä¸ªæ•´æ•°ä½äº `0` åˆ° `255` ä¹‹é—´ç»„æˆï¼Œä¸”ä¸èƒ½å«æœ‰å‰å¯¼ `0`ï¼‰ï¼Œæ•´æ•°ä¹‹é—´ç”¨ `'.'` åˆ†éš”ã€‚

- ä¾‹å¦‚ï¼š`"0.1.2.201"` å’Œ` "192.168.1.1"` æ˜¯ **æœ‰æ•ˆ** IP åœ°å€ï¼Œä½†æ˜¯`"0.011.255.245"`ã€`"192.168.1.312"` å’Œ `"192.168@1.1"` æ˜¯ **æ— æ•ˆ** IP åœ°å€ã€‚

ç»™å®šä¸€ä¸ªåªåŒ…å«æ•°å­—çš„å­—ç¬¦ä¸² `s` ï¼Œç”¨ä»¥è¡¨ç¤ºä¸€ä¸ª IP åœ°å€ï¼Œè¿”å›æ‰€æœ‰å¯èƒ½çš„**æœ‰æ•ˆ IP åœ°å€**ï¼Œè¿™äº›åœ°å€å¯ä»¥é€šè¿‡åœ¨ `s` ä¸­æ’å…¥ `'.'` æ¥å½¢æˆã€‚ä½  **ä¸èƒ½** é‡æ–°æ’åºæˆ–åˆ é™¤ `s` ä¸­çš„ä»»ä½•æ•°å­—ã€‚ä½ å¯ä»¥æŒ‰ **ä»»ä½•** é¡ºåºè¿”å›ç­”æ¡ˆã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼šs = "25525511135"
è¾“å‡ºï¼š["255.255.11.135","255.255.111.35"]
```

```
è¾“å…¥ï¼šs = "0000"
è¾“å‡ºï¼š["0.0.0.0"]
```

```
è¾“å…¥ï¼šs = "101023"
è¾“å‡ºï¼š["1.0.10.23","1.0.102.3","10.1.0.23","10.10.2.3","101.0.2.3"]
```

**æç¤ºï¼š**

- `1 <= s.length <= 20`
- `s` ä»…ç”±æ•°å­—ç»„æˆ`

**è§£é¢˜æ€è·¯ï¼š**

- å°è¯•æ¯ä¸€ä¸ªå¯ä»¥æ’å…¥ç‚¹çš„ä½ç½®ï¼Œå½“ç”¨è¯¥ä½ç½®åšåˆ†å‰²æ—¶ï¼Œæ˜¯å¦æ»¡è¶³åˆæ³•IP
- åˆ¤æ–­IPå­ä¸²æ˜¯å¦åˆæ³•
  - å­ä¸²é•¿åº¦ä¸º1-3
  - æ— å‰å¯¼é›¶ä¸”ä¸èƒ½æœ‰éæ³•å­—ç¬¦
  - å­ä¸²å°äº255
- å¯¹äºæ¯ä¸€ä¸ªå¯ä»¥æ’å…¥ç‚¹çš„ä½ç½®ï¼Œæ’å…¥ç‚¹åï¼Œå°†position+2åè¿›å…¥ä¸‹ä¸€è½®éå†
- é€€å‡ºæœ¬è½®éå†ååˆ é™¤ç‚¹ï¼Œå°è¯•å¯¹ä¸‹ä¸€ä¸ªä½ç½®è¿›è¡Œæ’å…¥

**ä»£ç ï¼š**

```cpp
class Solution {
public:
    vector<string> res;

    bool checknum(string s){
        if(s.size() == 0 || s.size() > 3){ // å¦‚æœå­ä¸²é•¿åº¦ä¸º0æˆ–è€…å¤§äº3ï¼Œä¸åˆæ³•
            return false;
        }
        if(s[0] == '0' && s.size() != 1){ // å¦‚æœå‰å¯¼é›¶ä¸”é•¿åº¦ä¸ä¸º1ï¼Œä¸åˆæ³•
            return false;
        }
        int res = 0;
        for(int i = 0; i < s.size(); i ++){
            if(s[i] > '9' || s[i] < '0'){ // å¦‚æœæœ‰éæ•°å­—ï¼Œä¸åˆæ³•
                return false;
            }
            res = res * 10 + s[i] - '0';
        }
        if(res > 255){ // å¦‚æœå­ä¸²å¤§äº255ï¼Œä¸åˆæ³•
            return false;
        }
        return true;;
    }

    void dfs(string& s, int depth, int position){ // sï¼Œå­—ç¬¦ä¸²ï¼›depthï¼Œæ·±åº¦ï¼Œå³å·²ç»æ’å…¥çš„ç‚¹æ•°ï¼›positionï¼Œå½“å‰è¦æ’å…¥çš„ä½ç½®
        if(depth == 3){ // å½“ä¸‰ä¸ªç‚¹å…¨éƒ¨è¢«æ’å…¥åï¼Œåˆ¤æ–­æœ€åä¸€æ®µæ˜¯å¦æ»¡è¶³è¦æ±‚
            if(checknum(s.substr(position))){ // æ»¡è¶³ï¼Œå°†så‹å…¥resä¸­
                res.push_back(s);
            }
            return;
        }

        for(int i = position; i < s.size(); i ++){ // ä»å½“å‰çš„ç¬¬ä¸€ä¸ªå¯æ’å…¥ä½ç½®å¼€å§‹éå†
            if(checknum(s.substr(position, i + 1 - position))){ // å½“å‘ç°åˆæ³•å­ä¸²
                s.insert(s.begin() + i + 1, '.'); // æ’å…¥ä¸€ä¸ªç‚¹
                dfs(s, depth+1, i + 2); // å› ä¸ºæ’å…¥äº†ç‚¹ï¼Œæ‰€ä»¥sçš„é•¿åº¦åŠ ä¸€ï¼Œpositionéœ€è¦åŠ 2æ‰èƒ½åˆ°è¾¾ä¸‹ä¸€ä¸ªå¯æ’å…¥ä½ç½®
                s.erase(s.begin() + i + 1);
            }
            else{ // å½“å‰å­ä¸²ä¸åˆæ³•ï¼Œåé¢å…¨ä¸åˆæ³•
                break;
            }
        }
    }

    vector<string> restoreIpAddresses(string s) {
        if(s.size() > 12){ // ä¸å¯èƒ½ä¸ºåˆæ³•IP
            return res;
        }
        dfs(s, 0, 0);
        return res;
    }
};
```



### 126. å•è¯æ¥é¾™II<span id="126"></span> ğŸŒŸ ğŸ¤¦â€â™‚ï¸ğŸ¤¦â€â™‚ï¸

**éš¾åº¦ï¼š**<font color=#ef4743>å›°éš¾</font>

**é¢˜ç›®ï¼š**

æŒ‰å­—å…¸ `wordList` å®Œæˆä»å•è¯ `beginWord` åˆ°å•è¯ `endWord` è½¬åŒ–ï¼Œä¸€ä¸ªè¡¨ç¤ºæ­¤è¿‡ç¨‹çš„ **è½¬æ¢åºåˆ—** æ˜¯å½¢å¼ä¸Šåƒ `beginWord -> s1 -> s2 -> ... -> sk` è¿™æ ·çš„å•è¯åºåˆ—ï¼Œå¹¶æ»¡è¶³ï¼š

- æ¯å¯¹ç›¸é‚»çš„å•è¯ä¹‹é—´ä»…æœ‰å•ä¸ªå­—æ¯ä¸åŒã€‚
- è½¬æ¢è¿‡ç¨‹ä¸­çš„æ¯ä¸ªå•è¯ `si`ï¼ˆ`1 <= i <= k`ï¼‰å¿…é¡»æ˜¯å­—å…¸ `wordList` ä¸­çš„å•è¯ã€‚æ³¨æ„ï¼Œ`beginWord` ä¸å¿…æ˜¯å­—å…¸ `wordList` ä¸­çš„å•è¯ã€‚
- `sk == endWord`

ç»™ä½ ä¸¤ä¸ªå•è¯ `beginWord` å’Œ `endWord` ï¼Œä»¥åŠä¸€ä¸ªå­—å…¸ `wordList` ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›æ‰€æœ‰ä»`beginWord` åˆ° `endWord` çš„ **æœ€çŸ­è½¬æ¢åºåˆ—** ï¼Œå¦‚æœä¸å­˜åœ¨è¿™æ ·çš„è½¬æ¢åºåˆ—ï¼Œè¿”å›ä¸€ä¸ªç©ºåˆ—è¡¨ã€‚æ¯ä¸ªåºåˆ—éƒ½åº”è¯¥ä»¥å•è¯åˆ—è¡¨ `[beginWord, s1, s2, ..., sk]` çš„å½¢å¼è¿”å›ã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼šbeginWord = "hit", endWord = "cog", wordList = ["hot","dot","dog","lot","log","cog"]
è¾“å‡ºï¼š[["hit","hot","dot","dog","cog"],["hit","hot","lot","log","cog"]]
è§£é‡Šï¼šå­˜åœ¨ 2 ç§æœ€çŸ­çš„è½¬æ¢åºåˆ—ï¼š
"hit" -> "hot" -> "dot" -> "dog" -> "cog"
"hit" -> "hot" -> "lot" -> "log" -> "cog"
```

```
è¾“å…¥ï¼šbeginWord = "hit", endWord = "cog", wordList = ["hot","dot","dog","lot","log"]
è¾“å‡ºï¼š[]
è§£é‡Šï¼šendWord "cog" ä¸åœ¨å­—å…¸ wordList ä¸­ï¼Œæ‰€ä»¥ä¸å­˜åœ¨ç¬¦åˆè¦æ±‚çš„è½¬æ¢åºåˆ—ã€‚
```

**æç¤ºï¼š**

- `1 <= beginWord.length <= 5`
- `endWord.length == beginWord.length`
- `1 <= wordList.length <= 5000`
- `wordList[i].length == beginWord.length`
- `beginWord`ã€`endWord` å’Œ `wordList[i]` ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
- `beginWord != endWord`
- `wordList` ä¸­çš„æ‰€æœ‰å•è¯ **äº’ä¸ç›¸åŒ**

**è§£é¢˜æ€è·¯ï¼š**

å›æº¯æ³•å¤ªéš¾äº†ğŸ¤¦â€â™‚ï¸åˆæ˜¯çœ‹äº†å®˜æ–¹é¢˜è§£çš„ä¸€é¢˜ï¼Œè€Œä¸”è¿˜çœ‹äº†å¥½ä¹…

- æ±‚æœ€çŸ­è·¯å¾„ï¼Œæƒ³åˆ°å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼Œä½†é¢˜é‡Œé¢æ²¡ç»™å‡ºå›¾ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå·±å»ºç«‹ä¸€å¼ å›¾æ¥ä¾›æˆ‘ä»¬åšéå†
- é€šè¿‡å»ºå›¾ï¼Œæ‰¾åˆ°äº†beginwordå’Œendwordçš„é€šè·¯ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±é€šè¿‡æ·±åº¦ä¼˜å…ˆæœç´¢æ¥æ‰¾åˆ°æ‰€æœ‰çš„æœ€çŸ­è·¯å¾„
- æ³¨ï¼š
  - å¯¹äºæ¯ä¸ªå•è¯çš„æ¯ä¸ªå­—æ¯ï¼Œéƒ½éœ€è¦ä»`a`åˆ°`z`æ›¿æ¢ä¸€æ¬¡ï¼Œçœ‹çœ‹nextwordæ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œå³ï¼š
    - æ˜¯å¦åœ¨dictä¸­
    - å±‚æ•°æ˜¯å¦æ»¡è¶³è¦æ±‚
  - å¯¹äºå­˜åœ¨dictä¸­çš„æ¯ä¸ªnextwordï¼Œåœ¨ä½¿ç”¨åéƒ½éœ€è¦åˆ é™¤ï¼Œé˜²æ­¢å½±å“åç»­æœç´¢

ï¼ˆè¿™é“é¢˜çš„å®˜æ–¹é¢˜è§£å¤ªå·®äº†ï¼Œä»ä»£ç è´¨é‡åˆ°é¢˜è§£å¯è¯»æ€§éƒ½å·®ï¼Œåé¢ä¼šå†å­¦ä¸€ä¸‹å›æº¯å’ŒSTLç›¸å…³çŸ¥è¯†ï¼Œè‡ªå·±é‡æ–°åšä¸€æ¬¡ï¼‰

**ä»£ç ï¼š**

```cpp
class Solution {
public:
    vector<vector<string>> findLadders(string beginWord, string endWord, vector<string>& wordList) {
       vector<vector<string>> res;
       unordered_set<string> dict = {wordList.begin(), wordList.end()}; // å»ºç«‹å“ˆå¸Œè¡¨
       if(dict.find(endWord) == dict.end()){ // å¦‚æœwordListä¸­æ²¡æœ‰endword
           return res;
       }
       dict.erase(beginWord); // åœ¨dictä¸­åˆ é™¤beginword,é˜²æ­¢åç»­æœç´¢æ—¶å½±å“ç»“æœ

       // 1. å¹¿åº¦ä¼˜å…ˆéå†å›¾
       unordered_map<string, int> steps = {{beginWord, 0}}; // è®°å½•æ˜¯ç¬¬å‡ å±‚ï¼Œç±»ä¼¼äºæ ‘çŠ¶
       unordered_map<string, set<string>> from = {{beginWord, {}}}; // è®°å½•ä¸€ä¸ªå•è¯å¯ä»¥ä»å“ªäº›å•è¯æ‰©å±•å¾—æ¥ï¼Œæˆ–è€…è¯´å¯ä»¥æ‰©å±•å¾—åˆ°å“ªäº›å•è¯
       int step = 0; // beginwordåœ¨ç¬¬0å±‚
       bool found = false; // è®°å½•æœ‰æ— è·¯çº¿å¯ä»¥å¾—åˆ°endword
       queue<string> q = queue<string>{{beginWord}}; // å»ºç«‹é˜Ÿåˆ—ï¼Œç”¨äºå¹¿åº¦ä¼˜å…ˆæœç´¢
       int wordlen = beginWord.length(); // è·å¾—å•è¯é•¿åº¦

       while(!q.empty()){ // å½“å‰é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œåˆ™å¯ä»¥ç»§ç»­æœç´¢;æœç´¢é¡ºåºä¸ºï¼Œè·å–é˜Ÿå¤´ï¼Œæ‰¾åˆ°é˜Ÿå¤´å¯ä»¥èµ°åˆ°çš„æ‰€æœ‰å•è¯å¹¶æ”¾åœ¨é˜Ÿå°¾
            step ++; // å±‚æ•°++
            int size = q.size(); // è·å¾—å½“å‰qçš„é•¿åº¦
            for(int i = 0; i < size; ++ i){ // éå†å½“å‰é˜Ÿåˆ—çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œå¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œå¹¿åº¦æœç´¢
                const string currword = move(q.front()); // std::moveæ˜¯å°†å¯¹è±¡çš„çŠ¶æ€æˆ–è€…æ‰€æœ‰æƒä»ä¸€ä¸ªå¯¹è±¡è½¬ç§»åˆ°å¦ä¸€ä¸ªå¯¹è±¡ï¼Œåªæ˜¯è½¬ç§»ï¼Œæ²¡æœ‰å†…å­˜çš„æ¬è¿æˆ–è€…å†…å­˜æ‹·è´
                string nextword = currword; // å…ˆå°†nextwordå®šä¹‰ä¸ºcurrwordï¼Œç„¶åå°è¯•ä¿®æ”¹æ¯ä¸€ä¸ªå­—æ¯å¾—åˆ°æ–°å•è¯
                q.pop(); // å°†é˜Ÿå¤´åˆ é™¤
                for(int j = 0; j < wordlen; ++ j){
                    const char originchar = nextword[j];
                    for(char c = 'a'; c <= 'z' ; ++ c){ // å°è¯•æ›¿æ¢ä¸ºæ‰€æœ‰å­—æ¯
                        nextword[j] = c;
                        
                        if(dict.find(nextword) == dict.end()){ // dictä¸­æ²¡æœ‰nextword
                            if(steps[nextword] == step){ // å¦‚æœåœ¨å±‚æ•°ä¸Šæ»¡è¶³æ¡ä»¶,å°±åœ¨fromé‡Œæ’å…¥,è¡¨æ˜å¯ä»¥ä»currwordåˆ°nextword; 
                                // è¿™é‡ŒåŠ å…¥è¿™ä¸ªåˆ¤æ–­çš„åŸå› æ˜¯ï¼Œnextwordå¯èƒ½æ˜¯è¢«ä»dictä¸­åˆ é™¤çš„ï¼Œè€Œä¸æ˜¯ä¸€ç›´ä¸å­˜åœ¨ï¼Œå¦‚æœä¸å†™è¿™ä¸ªåˆ¤æ–­å°±ä¼šå¯¼è‡´è¢«åˆ é™¤å•è¯å†æ¬¡è¢«éå†åˆ°åæ— æ³•æ ¹æ®å±‚æ•°åšæ’å…¥é€»è¾‘
                                from[nextword].insert(currword);
                            }
                            continue;
                        }
                        dict.erase(nextword); // ä»dictä¸­åˆ é™¤nextword,ç±»ä¼¼äºåˆ é™¤beginwordä¸€æ ·ï¼Œé˜²æ­¢å·²éå†è¿‡çš„å•è¯å½±å“åç»­æœç´¢
                        q.push(nextword); // è¿›å…¥é˜Ÿåˆ—ç­‰å¾…ä»è¯¥å•è¯è¿›è¡Œå¹¿åº¦æœç´¢
                        from[nextword].insert(currword); // åœ¨fromé‡Œæ’å…¥,è¡¨æ˜å¯ä»¥ä»currwordåˆ°nextword
                        steps[nextword] = step; // è®°å½•nextwordçš„å±‚æ•°
                        if(nextword == endWord){
                            found = true;
                        }
                    }
                    nextword[j] = originchar;
                }
            }
            if(found){ // æ‰¾åˆ°äº†å˜æˆendwordçš„è·¯ï¼Œé€€å‡ºå½“å‰å¾ªç¯ï¼Œåé¢çš„åªä¼šæ›´é•¿ï¼Œæ²¡æœ‰æ„ä¹‰ï¼Œä¸éœ€è¦éå†äº†
                break;
            }
        }

        // 2. æ·±åº¦ä¼˜å…ˆéå†å›¾
        if(found){ // å¦‚æœæœ‰è§£,ä»endwordå‘beginwordé€æ­¥æ¢å¤ï¼Œ
            vector<string> Path = {endWord};
            dfs(res, endWord, from, Path); // res:è¿”å›å€¼; endword:å‡ºå‘ç‚¹; from:å•è¯å’Œå•è¯ä¹‹é—´çš„è¿é€šæƒ…å†µ; Path:æ•´ä½“æ¢å¤è·¯çº¿ 
        }
        return res;
    }

    void dfs(vector<vector<string>> &res, const string &Node, unordered_map<string, set<string>> &from, vector<string> &path){
        if(from[Node].empty()){ // å¦‚æœfrom[Node]ä¸ºç©ºï¼Œè¡¨ç¤ºå·²ç»æ¢å¤åˆ°äº†beginwordï¼Œå› ä¸ºåœ¨åˆå§‹åŒ–æ—¶ï¼Œbeginwordå¯¹åº”çš„valueä¸ºç©º
            res.push_back({path.rbegin(), path.rend()}); // std::rbegin()çš„è¿”å›å€¼æ˜¯std::end(),åè½¬äº†ä¸€ä¸‹begin()
            return;
        }
        for(const string &Parent: from[Node]){ // å¯¹æ¯ä¸€ä¸ªå¯ä»¥åˆ°è¾¾Nodeçš„å•è¯åšdfsï¼Œå°è¯•æ¢å¤åˆ°beginword
            path.push_back(Parent); // å‹å…¥å½“å‰ç»“ç‚¹
            dfs(res, Parent, from, path); // å¯¹å½“å‰ç»“ç‚¹åšdfså°è¯•æ¢å¤åˆ°beginword
            path.pop_back(); // å¼¹å‡ºParent,çŠ¶æ€æ¢å¤
        }
    }
};
```



### 131. åˆ†å‰²å›æ–‡ä¸² <span id="131"></span>

**éš¾åº¦ï¼š**<font color=#ffa119>ä¸­ç­‰</font>

**é¢˜ç›®ï¼š**

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s`ï¼Œè¯·ä½ å°† `s` åˆ†å‰²æˆä¸€äº›å­ä¸²ï¼Œä½¿æ¯ä¸ªå­ä¸²éƒ½æ˜¯ **å›æ–‡ä¸²** ã€‚è¿”å› `s` æ‰€æœ‰å¯èƒ½çš„åˆ†å‰²æ–¹æ¡ˆã€‚

**å›æ–‡ä¸²** æ˜¯æ­£ç€è¯»å’Œåç€è¯»éƒ½ä¸€æ ·çš„å­—ç¬¦ä¸²ã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼šs = "aab"
è¾“å‡ºï¼š[["a","a","b"],["aa","b"]]
```

```
è¾“å…¥ï¼šs = "a"
è¾“å‡ºï¼š[["a"]]
```

**æç¤ºï¼š**

- `1 <= s.length <= 16`
- `s` ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ

**è§£é¢˜æ€è·¯ï¼š**

- æ€è·¯åŒå¤åŸIPï¼Œå¤åŸIPæ˜¯åˆ†å‰²å­—ç¬¦ä¸²ååˆ¤æ–­æ˜¯å¦æ»¡è¶³åˆæ³•IPè§„åˆ™ï¼›å›æ–‡ä¸²æ˜¯åˆ†å‰²å­—ç¬¦ä¸²ååˆ¤æ–­æ˜¯å¦æ»¡è¶³å›æ–‡
- ç›¸æ¯”IPï¼Œå›æ–‡ä¸²çš„dfså‡½æ•°å°‘äº†å‚æ•°depthï¼Œå› ä¸ºä¸é™åˆ¶å›æ–‡å­ä¸²çš„ä¸ªæ•°ï¼Œæ‰€ä»¥é€€å‡ºæ¡ä»¶å˜ä¸ºpositionç­‰äºå­—ç¬¦ä¸²é•¿åº¦ï¼Œå³æœ¬è½®éå†å·²ç»å…¨éƒ¨åˆ†å‰²
- å› ä¸ºæ²¡æœ‰æ’å…¥çš„æ“ä½œï¼Œæ‰€ä»¥position+1å³å¯
- å¦‚æœå½“å‰åˆ†å‰²ä½ç½®ä¹‹å‰å­ä¸²æ»¡è¶³å›æ–‡ï¼Œå°±å°†å­ä¸²å‹å…¥å¹¶ä»å½“å‰ä½ç½®å¼€å§‹è¿›å…¥ä¸‹ä¸€è½®åˆ†å‰²
- é€€å‡ºè¯¥è½®åˆ†å‰²åï¼Œå°†å­ä¸²å¼¹å‡ºï¼Œå¯¹ä¸‹ä¸€ä¸ªä½ç½®ç»§ç»­è¿›è¡Œæ‰«æ

**ä»£ç ï¼š**

```cpp
class Solution {
public:
    vector<vector<string>> res;
    vector<string> temp;

    bool checkstr(string s){ // æ£€æŸ¥å­ä¸²æ˜¯å¦æ»¡è¶³å›æ–‡æ¡ä»¶
        int left = 0, right = s.size() - 1;
        while(left <= right){
            if(s[left] == s[right]){
                left ++;
                right --;
            }
            else{ // å¦‚æœä¸å›æ–‡ï¼Œè¿”å›false
                return false;
            }
        }
        return true;
    }

    void dfs(string s, int position){ // sä¸ºæ‰€ç»™å­—ç¬¦ä¸²ï¼Œpositionä¸ºå½“å‰å¼€å§‹åˆ†å‰²çš„å­ä¸²é¦–å­—æ¯æ‰€åœ¨ä½ç½®
        if(position == s.size()){ // å¦‚æœå½“å‰è¦åˆ†å‰²çš„å­ä¸²é¦–å­—æ¯ä½ç½®å·²ç»ä¸ºs.size()ï¼Œè¯´æ˜å·²ç»åˆ†å‰²å®Œæ¯•
            res.push_back(temp); // å°†tempå‹å…¥res
        }

        for(int i = position; i < s.size(); i ++){
            if(checkstr(s.substr(position, i + 1 - position))){ // å¦‚æœæ»¡è¶³å›æ–‡
                temp.push_back(s.substr(position, i + 1 - position)); // å‹å…¥temp
                dfs(s, i + 1); // è¿›å…¥ä¸‹ä¸€è½®éå†ï¼Œpositionç§»åŠ¨åˆ°å›æ–‡å­ä¸²çš„ä¸‹ä¸€ä½ï¼Œå³i+1
                temp.pop_back();
            }
        }
    }

    vector<vector<string>> partition(string s) {
        if(s.size() == 1){
            temp.push_back(s);
            res.push_back(temp);
            return res;
        }
        dfs(s, 0); 
        return res;
    }
};
```



### 211. æ·»åŠ ä¸æœç´¢å•è¯ - æ•°æ®ç»“æ„è®¾è®¡ <span id="211"></span>

**éš¾åº¦ï¼š**<font color=#ffa119>ä¸­ç­‰</font>

**é¢˜ç›®ï¼š**

è¯·ä½ è®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œæ”¯æŒ æ·»åŠ æ–°å•è¯ å’Œ æŸ¥æ‰¾å­—ç¬¦ä¸²æ˜¯å¦ä¸ä»»ä½•å…ˆå‰æ·»åŠ çš„å­—ç¬¦ä¸²åŒ¹é… ã€‚

å®ç°è¯å…¸ç±» `WordDictionary` ï¼š

- `WordDictionary()` åˆå§‹åŒ–è¯å…¸å¯¹è±¡
- `void addWord(word)` å°† `word` æ·»åŠ åˆ°æ•°æ®ç»“æ„ä¸­ï¼Œä¹‹åå¯ä»¥å¯¹å®ƒè¿›è¡ŒåŒ¹é…
- `bool search(word)` å¦‚æœæ•°æ®ç»“æ„ä¸­å­˜åœ¨å­—ç¬¦ä¸²ä¸ `word` åŒ¹é…ï¼Œåˆ™è¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚`word` ä¸­å¯èƒ½åŒ…å«ä¸€äº› `'.'` ï¼Œæ¯ä¸ª `.` éƒ½å¯ä»¥è¡¨ç¤ºä»»ä½•ä¸€ä¸ªå­—æ¯ã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼š
["WordDictionary","addWord","addWord","addWord","search","search","search","search"]
[[],["bad"],["dad"],["mad"],["pad"],["bad"],[".ad"],["b.."]]
è¾“å‡ºï¼š
[null,null,null,null,false,true,true,true]

è§£é‡Šï¼š
WordDictionary wordDictionary = new WordDictionary();
wordDictionary.addWord("bad");
wordDictionary.addWord("dad");
wordDictionary.addWord("mad");
wordDictionary.search("pad"); // è¿”å› False
wordDictionary.search("bad"); // è¿”å› True
wordDictionary.search(".ad"); // è¿”å› True
wordDictionary.search("b.."); // è¿”å› True
```

**æç¤ºï¼š**

- `1 <= word.length <= 25`
- `addWord` ä¸­çš„ `word` ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
- `search` ä¸­çš„ `word` ç”± '.' æˆ–å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
- æœ€å¤šè°ƒç”¨ `104` æ¬¡ `addWord` å’Œ `search`

**è§£é¢˜æ€è·¯ï¼š**

- ç”¨äºŒç»´æ•°ç»„æ¥å®ç°å‰ç¼€æ ‘

  - `tire[N][26]`è¡¨ç¤ºå‰ç¼€æ ‘
  - `cnt[N]`è¡¨ç¤ºæ˜¯å¦æœ‰ä»¥è¯¥ç´¢å¼•ä»£è¡¨çš„å­—æ¯ç»“å°¾çš„å•è¯ï¼Œæ¢æˆ`int`å‹å°±å¯ä»¥è¡¨ç¤ºä¸ºä»¥è¯¥å­—æ¯ç»“å°¾çš„å•è¯ä¸ªæ•°
  - `idx`ä»£è¡¨ç´¢å¼•ï¼Œä»0å¼€å§‹ï¼Œ0æ—¢æ˜¯æ ¹èŠ‚ç‚¹ï¼Œåˆæ˜¯ç©ºèŠ‚ç‚¹

- å°†æ¯ä¸€ä¸ªå­—æ¯å¯¹åº”ä¸ºç›¸åº”çš„æ•°å­—ï¼Œå³`int temp = word[i] - 'a';`

- å¯¹äºæ’å…¥æ“ä½œ

  - æ£€æŸ¥å¯¹äºå½“å‰çš„çˆ¶èŠ‚ç‚¹ï¼Œå­èŠ‚ç‚¹`word[i]`æ˜¯å¦å·²å­˜åœ¨ï¼›
    - å­˜åœ¨ï¼Œå°±æ²¿ç€è·¯çº¿èµ°ï¼›
    - ä¸å­˜åœ¨ï¼Œå°±åˆ›é€ ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œ`tire[p][temp] = ++ idx;`å¹¶æ²¿ç€èµ°
  - æœ€åå°†`cnt[p]`æ ‡è®°ä¸º`true`ï¼Œå¦‚æœè¦è®°å½•ä¸ªæ•°å°±å¯¹`cnt[p]++`

- å¯¹äºæœç´¢æ“ä½œ

  - æ£€æŸ¥å¯¹äºå½“å‰çš„çˆ¶èŠ‚ç‚¹ï¼Œå­èŠ‚ç‚¹`word[i]`æ˜¯å¦å·²å­˜åœ¨ï¼›

    - å­˜åœ¨ï¼Œå°±æ²¿ç€è·¯çº¿èµ°ï¼›

    - ä¸å­˜åœ¨ï¼Œè¿”å›false

  - æœ€ååˆ¤æ–­`cnt[depth]`æ˜¯å¦ä¸º`true`å³å¯ï¼Œå³åˆ¤æ–­æœ‰æ— ä»¥æœ€åä¸€ä¸ªå­—æ¯ç»“å°¾çš„å•è¯

**ä»£ç ï¼š**

```cpp
class WordDictionary {
public:
    int tire[250000][26] = {0}; // åˆå§‹åŒ–tireä¸º0
    bool cnt[250000]; // è®°å½•å­—ç¬¦ä¸²å­˜åœ¨æƒ…å†µ
    int idx = 0; // æŒ‡é’ˆ
    WordDictionary() {
    }
    
    void addWord(string word) {
        int p = 0;
        for(int i = 0; i < word.size(); i ++){ // å°†wordçš„æ¯ä¸€ä¸ªå­—æ¯è½¬ä¸ºæ•°å­—å­˜å…¥tire
            int temp = word[i] - 'a';
            if(!tire[p][temp]){ // å¦‚æœå½“å‰ä½ç½®æ²¡æœ‰å­˜å­—æ¯
                tire[p][temp] = ++ idx; // å°±æ ‡è®°ä¸º++idx
            }
            p = tire[p][temp]; // æŒ‡é’ˆç§»åŠ¨åˆ°å½“å‰å­—æ¯æ‰€ä»£è¡¨çš„ä½ç½®
        }
        cnt[p] = true; // å°†æœ€åä¸€ä¸ªå­—æ¯æ‰€åœ¨ä½ç½®çš„æ ‡è®°è®¾ä¸ºtrueï¼Œä»£è¡¨æœ‰ä»¥è¯¥å­—æ¯ç»“å°¾çš„å•è¯
    }
    
    bool search(string word) {
        return dfs(word, 0, 0);
    }

    bool dfs(string word, int position, int depth){ // wordï¼Œè¦æœç´¢çš„å•è¯ï¼›positionï¼Œå½“å‰æ¯”è¾ƒåˆ°çš„ä½ç½®ï¼›depthï¼Œçˆ¶èŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºåœ¨å‰ç¼€æ ‘ä¸Šçš„æ·±åº¦
        if(position == word.size()){ // å¦‚æœå¯¹wordéå†ç»“æŸï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä»¥æœ€åä¸€ä¸ªå­—æ¯ç»“å°¾çš„å•è¯
            return cnt[depth];
        }
        if(word[position] != '.'){ // å¦‚æœå½“å‰å­—ç¬¦æ˜¯æ™®é€šå­—æ¯
            int temp = word[position] - 'a'; // è®¡ç®—å¯¹åº”çš„ä¸‹æ ‡å¹¶æŸ¥çœ‹æ˜¯å¦å­˜åœ¨
            if(!tire[depth][temp]){ // ä¸å­˜åœ¨ï¼Œè¿”å›false
                return false;
            }
            else{ // å­˜åœ¨ï¼Œç§»åŠ¨æŒ‡é’ˆåˆ°tire[depth][temp]ï¼Œå¹¶å¯¹ä¸‹ä¸€ä¸ªå­—æ¯è¿›è¡Œæ£€æŸ¥
                return dfs(word, position + 1, tire[depth][temp]);
            }
        }
        else{ // å¦‚æœæ˜¯ '.' 
            int flag = false; // å…ˆè®¾ä¸€ä¸ªflagä¸ºfalse
            for(int j = 0; j < 26; j ++){ // å› ä¸º'.'å¯ä»¥è¡¨ç¤ºæ‰€æœ‰å­—æ¯ï¼Œå°±éå†26ä¸ªå­—æ¯
                if(tire[depth][j]){ // å¦‚æœå½“å‰å­—æ¯å­˜åœ¨ï¼Œå°±ä»è¯¥å­—æ¯è¿›å…¥ä¸‹ä¸€è½®éå†ï¼›å¦åˆ™æ¢ä¸‹ä¸€ä¸ªå­—æ¯åˆ¤æ–­
                    flag = flag || dfs(word, position + 1, tire[depth][j]); // åšæˆ–è¿ç®—ï¼Œæœ‰ä¸€ä¸ªæˆç«‹å³å¯
                }
                if(flag){ // å‰ªæï¼Œä¸ç”¨åˆ¤æ–­åé¢äº†
                    return true;
                }
            }
            return flag;
        }
        return false; // å¦‚æœæ²¡æœ‰æ»¡è¶³cnt[depth]=trueï¼Œå°±åªèƒ½è¿”å›falseäº†
    }
};

/**
 * Your WordDictionary object will be instantiated and called as such:
 * WordDictionary* obj = new WordDictionary();
 * obj->addWord(word);
 * bool param_2 = obj->search(word);
 */
```



### 212. å•è¯æœç´¢II <span id="212"></span> ğŸŒŸ ğŸ¤¦â€â™‚ï¸ğŸ¤¦â€â™‚ï¸

**éš¾åº¦ï¼š**<font color=#ef4743>å›°éš¾</font>

**é¢˜ç›®ï¼š**

ç»™å®šä¸€ä¸ª `m x n` äºŒç»´å­—ç¬¦ç½‘æ ¼ `board` å’Œä¸€ä¸ªå•è¯ï¼ˆå­—ç¬¦ä¸²ï¼‰åˆ—è¡¨ `words`ï¼Œ *è¿”å›æ‰€æœ‰äºŒç»´ç½‘æ ¼ä¸Šçš„å•è¯* ã€‚

å•è¯å¿…é¡»æŒ‰ç…§å­—æ¯é¡ºåºï¼Œé€šè¿‡ **ç›¸é‚»çš„å•å…ƒæ ¼** å†…çš„å­—æ¯æ„æˆï¼Œå…¶ä¸­â€œç›¸é‚»â€å•å…ƒæ ¼æ˜¯é‚£äº›æ°´å¹³ç›¸é‚»æˆ–å‚ç›´ç›¸é‚»çš„å•å…ƒæ ¼ã€‚åŒä¸€ä¸ªå•å…ƒæ ¼å†…çš„å­—æ¯åœ¨ä¸€ä¸ªå•è¯ä¸­ä¸å…è®¸è¢«é‡å¤ä½¿ç”¨ã€‚

**ç¤ºä¾‹ï¼š**

![å•è¯æœç´¢ å›¾æºLeetCode](https://assets.leetcode.com/uploads/2020/11/07/search1.jpg)

```
è¾“å…¥ï¼šboard = [["o","a","a","n"],["e","t","a","e"],["i","h","k","r"],["i","f","l","v"]], words = ["oath","pea","eat","rain"]
è¾“å‡ºï¼š["eat","oath"]
```
![å•è¯æœç´¢ å›¾æºLeetCode](https://assets.leetcode.com/uploads/2020/11/07/search2.jpg)
```
è¾“å…¥ï¼šboard = [["a","b"],["c","d"]], words = ["abcb"]
è¾“å‡ºï¼š[]
```

**æç¤ºï¼š**

- `m == board.length`
- `n == board[i].length`
- `1 <= m, n <= 12`
- `board[i][j]` æ˜¯ä¸€ä¸ªå°å†™è‹±æ–‡å­—æ¯
- `1 <= words.length <= 3 * 104`
- `1 <= words[i].length <= 10`
- `words[i]` ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
- `words` ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸²äº’ä¸ç›¸åŒ

**è§£é¢˜æ€è·¯ï¼š**

- å¾ˆæ˜¾ç„¶ï¼Œå½“æˆ‘ä¼å›¾ç”¨å•è¯æœç´¢çš„æ–¹æ³•åŠ ä¸€ä¸ªéå†æ¥åšè¿™é“é¢˜ï¼Œå®ƒç‹ ç‹ çš„è¶…æ—¶äº†ğŸ˜«
- ç»§ç»­å€Ÿé‰´[å¾®æ‰°ç†è®ºå¤§ç¥](https://leetcode-cn.com/problems/word-search-ii/solution/wei-rao-li-lun-dfsbao-sou-triejian-zhi-b-pqwr/)çš„æ€è·¯
- åšè¿™é“é¢˜éœ€è¦å¯¹æ—¶é—´å¤æ‚åº¦åšä¸€ä¸ªç²¾æ‰“ç»†ç®—ï¼Œè¦ä¸ç„¶C++å¯èƒ½ä¼šå‹‰å¼ºè¿‡ï¼Œå…¶ä»–çš„éƒ½å¾—WA
- è€ƒè™‘å½“æˆ‘ä»¬æ‰¾åˆ°ä¸€ä¸ªå•è¯çš„ç»“å°¾æ—¶ï¼Œæœ‰å¯èƒ½ç»§ç»­å¾€ä¸‹èµ°è¿˜æœ‰å¦ä¸€ä¸ªå•è¯ï¼Œè€Œä¸æ˜¯ä»å¤´å†æ¥
- å¯»æ‰¾å•è¯é¦–å­—æ¯åˆé€‚ä½ç½®æ—¶
  - å¦‚æœç”¨å•è¯é¦–å­—æ¯å»æ‰¾å¯¹åº”çš„`board[i][j]`ï¼Œéœ€è¦`words.length * n * m`
  - å¦‚æœæˆ‘ä»¬å…ˆå»ºç«‹å‰ç¼€æ ‘ï¼Œåªéœ€è¦æ‹¿åˆ°`board[i][j]`ï¼Œå°±å¯ä»¥ç›´æ¥åˆ¤æ–­å‡ºæœ‰æ— é¦–å­—æ¯ï¼Œæ˜¯ `nm`

- å¯»æ‰¾åç»­çš„å­—æ¯ä½ç½®
  - ä»å®šå¥½çš„æ–¹å‘ä¸­é€‰ä¸€ä¸ªå‡ºæ¥èµ°ï¼Œåˆ¤æ–­ä¸€ä¸‹çŠ¶æ€ï¼Œä¸èµ°å›å¤´è·¯ï¼Œå’Œ `79.å•è¯æœç´¢` æ€è·¯ä¸€æ ·
  - å½“é‡åˆ°ä¸€ä¸ªå•è¯æœ«å°¾çš„æ—¶å€™ï¼Œç»§ç»­é€‰æ–¹å‘å¾€ä¸‹èµ°ï¼Œå› ä¸ºæœ‰å¯èƒ½æœ‰å…¶ä»–å•è¯çš„å‰ç¼€æ˜¯å½“å‰å•è¯ï¼Œä¾‹å¦‚ `abcd`å’Œ`abcde`

- å»é‡
  - å¯èƒ½åœ¨`board`ä¸­å­˜åœ¨ä¸æ­¢ä¸€æ¡è·¯å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªå•è¯ï¼Œè¿™æ ·å°±ä¼šäº§ç”Ÿé‡å¤æƒ…å†µï¼Œä¾‹å¦‚ç¤ºä¾‹äºŒ
  - æœ‰ä¸¤ç§å»é‡åŠæ³•
    - ç¬¬ä¸€ç§æ˜¯åœ¨å‰ç¼€æ ‘ä¸­åŠ å…¥ä¸€ä¸ª`boolå€¼`æ¥è®°å½•å½“å‰å•è¯æ˜¯å¦å·²è¢«å‹å…¥
    - ç¬¬äºŒç§æ˜¯é‡‡ç”¨`unordered_set`æ¥å­˜å‚¨`word`ï¼Œä¹‹åä»ä¸­å–å‡ºå‹å…¥`res`ï¼Œåº•å±‚å®ç°ä¸º`hash`ï¼Œå› æ­¤ä¸ä¼šå‡ºç°é‡å¤å…ƒç´ 

- å‰ç¼€æ ‘çš„å»ºç«‹
  - å¯ä»¥è‡ªå®šä¹‰æ•°æ®ç»“æ„`TrieNode`
  - ä¹Ÿå¯ä»¥é‡‡ç”¨äºŒç»´æ•°ç»„æ¥æ„æˆå‰ç¼€æ ‘ï¼Œè§**ç®—æ³•æ¨¡æ¿æ€»ç»“**çš„å‰ç¼€æ ‘éƒ¨åˆ†


**ä»£ç ï¼š**

```cpp
struct TrieNode{ // å®šä¹‰å‰ç¼€æ ‘çš„æ•°æ®ç»“æ„
    vector<TrieNode*> children;
    bool isWordEnd;
    bool isAdd;

    TrieNode(){
        children = vector<TrieNode*>(26, NULL);
        isWordEnd = false;
        isadd = false;
    }
};
class Solution {
public:
    vector<pair<int, int>> directions{{0, 1}, {0, -1}, {1, 0}, {-1, 0}}; // å®šä¹‰æ–¹å‘
    vector<string> res; // è¿”å›å€¼

    void dfs(vector<vector<char>>& board, string& word, int i, int j, TrieNode* root){
        char nowchar = board[i][j]; // å½“å‰ä½ç½®çš„å­—ç¬¦
        int nowindex = nowchar - 'a'; // å¾—åˆ°å½“å‰å­—ç¬¦çš„ç´¢å¼•
        if(root->children[nowindex] == NULL){ // å¦‚æœè¯¥ç´¢å¼•å¯¹åº”çš„ä½ç½®ä¸ºNULLï¼Œè¯´æ˜æ²¡æœ‰è¿™ä¸ªå•è¯ï¼Œè¿”å›
            return;
        }
        board[i][j] = '0'; // å°†board[i][j]æ ‡è®°ä¸º'0'ï¼Œä»£è¡¨æ­£åœ¨ä½¿ç”¨
        word += nowchar; // è®°å½•å½“å‰éå†åˆ°çš„åˆæ³•å•è¯å­ä¸²
        if(root->children[nowindex]->isWordEnd && !root->children[nowindex]->isAdd){ // å¦‚æœå½“å‰ä½ç½®æ˜¯å•è¯çš„ç»“å°¾å¹¶ä¸”è¯¥å•è¯æ²¡æœ‰è¢«å‹å…¥åˆ°resä¸­ï¼Œå°†å…¶å‹å…¥
            root->children[nowindex]->isAdd = true; // ä¿®æ”¹è¯¥å•è¯çš„å‹å…¥æƒ…å†µï¼Œå»é‡
            res.push_back(word);
        }

        for(auto& dir:directions){ // éå†å››ä¸ªæ–¹å‘
            int newi = i + dir.first, newj = j + dir.second;
            if(newi >= 0 && newi < board.size() && newj >= 0 && newj < board[0].size()){ // è¯¥æ–¹å‘ä¸ºåˆæ³•æ–¹å‘
                if(board[newi][newj] != '0'){ // è¯¥ä½ç½®åœ¨å½“å‰å•è¯çš„æœç´¢ä¸­æ²¡æœ‰è¢«ä½¿ç”¨è¿‡
                    dfs(board, word, newi, newj, root->children[nowindex]); // è¿›å…¥æ–°ä¸€è½®éå†
                }
            }
        }
        board[i][j] = nowchar; // æ¢å¤å½“å‰ä½ç½®çŠ¶æ€
        word.pop_back(); // å¼¹å‡º
    }

    vector<string> findWords(vector<vector<char>>& board, vector<string>& words) {
        TrieNode* root = new TrieNode(); // æ–°å»ºå‰ç¼€æ ‘çš„æ ¹ç»“ç‚¹
        for(auto word: words){ // å»ºç«‹å‰ç¼€æ ‘
            TrieNode* p = root;
            for(auto c:word){
                int index = c - 'a';
                if(p->children[index] == NULL){
                    p->children[index] = new TrieNode();
                }
                p = p->children[index];
            }
            p->isWordEnd = true;
        }
        string word = ""; // å®šä¹‰æœç´¢åˆ°çš„åˆæ³•å•è¯å­ä¸²
        for(int i = 0; i < board.size(); i ++){ // éå†boardçš„æ¯ä¸€ä¸ªä½ç½®ä½œä¸ºå•è¯çš„é¦–å­—æ¯ä½ç½®
            for(int j = 0; j < board[0].size(); j ++){
                dfs(board, word, i, j, root); // è¿›å…¥éå†
            }
        }

        return res;
    }
};
```



### 216. ç»„åˆæ€»æ•°III <span id="216"></span>

**éš¾åº¦ï¼š**<font color=#ffa119>ä¸­ç­‰</font>

**é¢˜ç›®ï¼š**

æ‰¾å‡ºæ‰€æœ‰ç›¸åŠ ä¹‹å’Œä¸º `n` çš„ `k` ä¸ªæ•°çš„ç»„åˆï¼Œä¸”æ»¡è¶³ä¸‹åˆ—æ¡ä»¶ï¼š

- åªä½¿ç”¨æ•°å­—1åˆ°9
- æ¯ä¸ªæ•°å­— **æœ€å¤šä½¿ç”¨ä¸€æ¬¡** 

è¿”å› *æ‰€æœ‰å¯èƒ½çš„æœ‰æ•ˆç»„åˆçš„åˆ—è¡¨* ã€‚è¯¥åˆ—è¡¨ä¸èƒ½åŒ…å«ç›¸åŒçš„ç»„åˆä¸¤æ¬¡ï¼Œç»„åˆå¯ä»¥ä»¥ä»»ä½•é¡ºåºè¿”å›ã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥: k = 3, n = 7
è¾“å‡º: [[1,2,4]]
è§£é‡Š:
1 + 2 + 4 = 7
æ²¡æœ‰å…¶ä»–ç¬¦åˆçš„ç»„åˆäº†ã€‚
```

```
è¾“å…¥: k = 3, n = 9
è¾“å‡º: [[1,2,6], [1,3,5], [2,3,4]]
è§£é‡Š:
1 + 2 + 6 = 9
1 + 3 + 5 = 9
2 + 3 + 4 = 9
æ²¡æœ‰å…¶ä»–ç¬¦åˆçš„ç»„åˆäº†ã€‚
```

```
è¾“å…¥: k = 4, n = 1
è¾“å‡º: []
è§£é‡Š: ä¸å­˜åœ¨æœ‰æ•ˆçš„ç»„åˆã€‚
åœ¨[1,9]èŒƒå›´å†…ä½¿ç”¨4ä¸ªä¸åŒçš„æ•°å­—ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°çš„æœ€å°å’Œæ˜¯1+2+3+4 = 10ï¼Œå› ä¸º10 > 1ï¼Œæ²¡æœ‰æœ‰æ•ˆçš„ç»„åˆã€‚
```

**æç¤ºï¼š**

- `2 <= k <= 9`
- `1 <= n <= 60`

**è§£é¢˜æ€è·¯ï¼š**

- è§‚å¯Ÿé¢˜ç›®å¯çŸ¥è¿™æ˜¯ä¸€é“ç»„åˆé¢˜ï¼Œä¸èƒ½åŒ…å«ç›¸åŒçš„ç»„åˆ
- æŒ‰ç…§ç»„åˆé¢˜çš„åšæ³•ï¼Œæˆ‘ä»¬å‘`dfs`å‡½æ•°ä¸­ä¼ å…¥ä¸€ä¸ª`position`å‚æ•°ä»£è¡¨å½“å‰éå†åˆ°çš„ä½ç½®ï¼Œé¿å…é‡å¤éå†ä¹‹å‰çš„æ•°æ®
- è€ƒè™‘`dfs`çš„ç»“æŸæ¡ä»¶ï¼šä½¿ç”¨äº†`k`ä¸ªæ•°ä¸”å’Œä¸º`n`ï¼Œå°†`temp`å‹å…¥`res`ä¸­å¹¶è¿”å›
- `dfs`çš„éå†æ–¹å¼
  - ä»`position`å¼€å§‹éå†ï¼Œå½“æ‰¾åˆ°äº†ç¬¦åˆè¦æ±‚çš„å€¼ï¼Œå‹å…¥`temp`ï¼Œå¹¶ä»ä¸‹ä¸€ä¸ªä½ç½®è¿›è¡Œæ–°ä¸€è½®éå†
  - ç»“æŸæœ¬æ¬¡éå†åï¼Œå°†è¯¥å€¼ä»`temp`ä¸­å¼¹å‡ºï¼Œ
  - ç»§ç»­è¿›è¡Œ`for`å¾ªç¯

**ä»£ç ï¼š**

```cpp
class Solution {
public:
    vector<vector<int>> res;
    vector<int> temp;

    void dfs(int k, int n, int position, int number, int sum){
        if(number == k){ // å¦‚æœå·²ç»ä½¿ç”¨äº†kä¸ªæ•°ï¼Œåˆ¤æ–­å’Œæ˜¯å¦ä¸ºn
            if(sum == n){ // ä¸ºnï¼Œå°†tempå‹å…¥res
                res.push_back(temp);
            }
            return;
        }
        for(int i = position; i <= 9; i ++){
            if(sum + i <= n && number + 1 <= k){ // å¦‚æœæ•°å­—ä¹‹å’Œã€ä¸ªæ•°å‡åœ¨èŒƒå›´å†…ï¼Œä»è¯¥æ•°å­—çš„ä¸‹ä¸€ä½è¿›å…¥ä¸‹ä¸€è½®å¾ªç¯
                temp.push_back(i); // å‹å…¥
                dfs(k, n, i + 1, number + 1, sum + i);
                temp.pop_back(); // å¼¹å‡º
            }
            else{ // å‰ªæ
                break;
            }
        }
    }

    vector<vector<int>> combinationSum3(int k, int n) {
        dfs(k, n, 1, 0, 0);
        return res;
    }
};
```



### 306. ç´¯åŠ æ•° <span id="306"></span> ğŸŒŸ

**éš¾åº¦ï¼š**<font color=#ffa119>ä¸­ç­‰</font>

**é¢˜ç›®ï¼š**

**ç´¯åŠ æ•°** æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç»„æˆå®ƒçš„æ•°å­—å¯ä»¥å½¢æˆç´¯åŠ åºåˆ—ã€‚

ä¸€ä¸ªæœ‰æ•ˆçš„ **ç´¯åŠ åºåˆ—** å¿…é¡» **è‡³å°‘** åŒ…å« 3 ä¸ªæ•°ã€‚é™¤äº†æœ€å¼€å§‹çš„ä¸¤ä¸ªæ•°ä»¥å¤–ï¼Œåºåˆ—ä¸­çš„æ¯ä¸ªåç»­æ•°å­—å¿…é¡»æ˜¯å®ƒä¹‹å‰ä¸¤ä¸ªæ•°å­—ä¹‹å’Œã€‚

ç»™ä½ ä¸€ä¸ªåªåŒ…å«æ•°å­— `'0'-'9'` çš„å­—ç¬¦ä¸²ï¼Œç¼–å†™ä¸€ä¸ªç®—æ³•æ¥åˆ¤æ–­ç»™å®šè¾“å…¥æ˜¯å¦æ˜¯ **ç´¯åŠ æ•°** ã€‚å¦‚æœæ˜¯ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

**è¯´æ˜ï¼š**ç´¯åŠ åºåˆ—é‡Œçš„æ•°ï¼Œé™¤æ•°å­— 0 ä¹‹å¤–ï¼Œ**ä¸ä¼š** ä»¥ 0 å¼€å¤´ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç° `1, 2, 03` æˆ–è€… `1, 02, 3` çš„æƒ…å†µã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼š"112358"
è¾“å‡ºï¼štrue 
è§£é‡Šï¼šç´¯åŠ åºåˆ—ä¸º: 1, 1, 2, 3, 5, 8 ã€‚1 + 1 = 2, 1 + 2 = 3, 2 + 3 = 5, 3 + 5 = 8
```

```
è¾“å…¥ï¼š"199100199"
è¾“å‡ºï¼štrue 
è§£é‡Šï¼šç´¯åŠ åºåˆ—ä¸º: 1, 99, 100, 199ã€‚1 + 99 = 100, 99 + 100 = 199
```

**æç¤ºï¼š**

- `1 <= num.length <= 35`
- `num` ä»…ç”±æ•°å­—ï¼ˆ`0` - `9`ï¼‰ç»„æˆ

**è¿›é˜¶ï¼š**ä½ è®¡åˆ’å¦‚ä½•å¤„ç†ç”±è¿‡å¤§çš„æ•´æ•°è¾“å…¥å¯¼è‡´çš„æº¢å‡º?

**è§£é¢˜æ€è·¯ï¼š**

- æœ¬é¢˜è§£æ³•æ¥è‡ª [å¾®æ‰°ç†è®ºå¤§ç¥](https://leetcode-cn.com/problems/additive-number/solution/wei-rao-li-lun-da-shu-jia-fa-hui-su-yan-9q0d5/)
- è§‚å¯Ÿæ•°æ®èŒƒå›´å¯çŸ¥ï¼Œ`num`çš„é•¿åº¦æœ€å¤§ä¸º35ï¼Œå¯èƒ½ä¼šå¯¼è‡´`first`å’Œ`second`å‘ç”Ÿæº¢å‡ºï¼Œæ‰€ä»¥é‡‡ç”¨å¤§æ•°åŠ æ³•ï¼Œæˆ–è€…å«é«˜ç²¾åº¦åŠ æ³•
- å› ä¸ºæ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å˜å¼ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦ç¡®å®šç¬¬ä¸€ä¸ªæ•°å’Œç¬¬äºŒä¸ªæ•°çš„ä½ç½®å³å¯ï¼Œåç»­çš„ç›´æ¥å’Œä¸¤æ•°ä¹‹å’Œå¯¹æ¯”
  - ç›¸ç­‰ï¼Œè¿›å…¥æ–°ä¸€è½®å¯¹æ¯”
  - ä¸ç›¸ç­‰ï¼Œè¿”å›false
-  [å¾®æ‰°ç†è®ºå¤§ç¥](https://leetcode-cn.com/problems/additive-number/solution/wei-rao-li-lun-da-shu-jia-fa-hui-su-yan-9q0d5/) ç”¨å­—ç¬¦ä¸²æ¯”è¾ƒä»£æ›¿äº†æ•°å­—æ¯”è¾ƒ
  - ä¸€æ–¹é¢é¿å…äº†å¤§æ•°æº¢å‡ºçš„æƒ…å†µ
  - å¦ä¸€æ–¹é¢çœå»äº†å­—ç¬¦ä¸²å’Œæ•´å‹çš„è½¬æ¢ï¼Œç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²çš„æ¯ä¸€ä½æ¯”è¾ƒï¼Œè¿˜å¯ä»¥ç”¨é•¿åº¦æ¥åšå‰ªæåˆ¤æ–­
- å‡ ç‚¹ç»†èŠ‚
  - ä¼ å…¥firstã€secondã€sumçš„é¦–åœ°å€
  - åˆ¤æ–­firstã€secondæ˜¯å¦ä¸ºéæ³•æ•°æ®ï¼Œå³æ˜¯å¦ä¸ºå‰å¯¼é›¶ä¸”é•¿åº¦ä¸ä¸º1
  - åˆ¤æ–­ä¸¤æ•°ä¹‹å’Œçš„é•¿åº¦å’Œå‰©ä½™é•¿åº¦çš„å¤§å°å…³ç³»
    - å¦‚æœä¸¤æ•°ä¹‹å’Œæ›´å¤§ï¼Œé‚£ä¹ˆsumä¸€å®šå°äºfirst + second
    - å¦‚æœåœ¨é€ä¸€å¯¹æ¯”æ— è¯¯ï¼Œä¸”ä¸¤æ•°ä¹‹å’Œçš„é•¿åº¦ä¸å‰©ä½™é•¿åº¦ç›¸åŒï¼Œè¯´æ˜å·²ç»å…¨éƒ¨å¯¹æ¯”è¿‡ï¼Œæ»¡è¶³ç´¯åŠ æ•°æ¡ä»¶
    - å¦‚æœä¸¤æ•°ä¹‹å’Œçš„é•¿åº¦å°äºå‰©ä½™é•¿åº¦ï¼Œè¯´æ˜è¿˜æœªéå†è¿‡æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œè¿›å…¥æ–°ä¸€è½®éå†

**ä»£ç ï¼š**

```cpp
class Solution {
public:
    string addNum(string &s1, string &s2){ // å¤§æ•°åŠ æ³•
        int n1 = s1.size() - 1;
        int n2 = s2.size() - 1;
        int carry = 0;
        string ans;

        while(n1 >= 0 || n2 >= 0 || carry > 0){
            int t1 = n1 >= 0 ? s1[n1--] - '0' : 0;
            int t2 = n2 >= 0 ? s2[n2--] - '0' : 0;
            ans += (t1 + t2 + carry) % 10 + '0';
            carry = (t1 + t2 + carry) / 10;
        }

        reverse(ans.begin(), ans.end());
        return ans;
    }

    bool check(string num, int first, int second, int sum){ // ç¬¬ä¸€ä¸ªæ•°ã€ç¬¬äºŒä¸ªæ•°ã€ä¸¤æ•°ä¹‹å’Œçš„å¼€å¤´ä½ç½®
        if(num[first] == '0' && second - first > 1){ // å¦‚æœä¸ºéæ³•æ•°å­—ï¼Œè¿”å›false
            return false;
        }
        if(num[second] == '0' && sum - second > 1){
            return false;
        }
        
        string firststr = num.substr(first, second - first);
        string secondstr = num.substr(second, sum - second);
        string tempsum = addNum(firststr, secondstr); // å¤§æ•°åŠ æ³•ï¼Œè¿”å›å­—ç¬¦ä¸²

        if(tempsum.size() > num.size() - sum){ // å¦‚æœä¸¤æ•°ä¹‹å’Œçš„å­—ç¬¦ä¸²é•¿åº¦å¤§äºå‰©ä½™é•¿åº¦ï¼Œåˆ™ä¸€å®šä¸èƒ½åŒ¹é…
            return false;
        }
        for(int i = 0; i < tempsum.size(); i ++){
            if(tempsum[i] != num[sum + i]){ // å¦‚æœå‡ºç°å­—ç¬¦ä¸åŒ¹é…ï¼Œè¿”å›false
                return false;
            }
        }

        if(tempsum.size() == num.size() - sum){ // å¦‚æœå…¨éƒ¨åŒ¹é…ä¸”éå†å®Œæ•´ä¸ªnumï¼Œè¿”å›true
            return true;
        }

        return check(num, second, sum, sum + tempsum.size()); // é€’å½’è°ƒç”¨check
    }

    bool isAdditiveNumber(string num) {
        int len = num.size();
        for(int second = 1; second < len; second ++){
            for(int sum = second + 1; sum < len; sum ++){
                if(check(num, 0, second, sum)){
                    return true;
                }
            }
        }
        return false;
    }
};
```



### 526. ä¼˜ç¾çš„æ’åˆ— <span id="526"></span>

**éš¾åº¦ï¼š**<font color=#ffa119>ä¸­ç­‰</font>

**é¢˜ç›®ï¼š**

å‡è®¾æœ‰ä» 1 åˆ° n çš„ n ä¸ªæ•´æ•°ã€‚ç”¨è¿™äº›æ•´æ•°æ„é€ ä¸€ä¸ªæ•°ç»„ `perm`ï¼ˆ**ä¸‹æ ‡ä» 1 å¼€å§‹**ï¼‰ï¼Œåªè¦æ»¡è¶³ä¸‹è¿°æ¡ä»¶ **ä¹‹ä¸€** ï¼Œè¯¥æ•°ç»„å°±æ˜¯ä¸€ä¸ª **ä¼˜ç¾çš„æ’åˆ—** ï¼š

- `perm[i]` èƒ½å¤Ÿè¢« `i` æ•´é™¤
- `i` èƒ½å¤Ÿè¢« `perm[i]` æ•´é™¤

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` ï¼Œè¿”å›å¯ä»¥æ„é€ çš„ **ä¼˜ç¾æ’åˆ—** çš„ **æ•°é‡** ã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼šn = 2
è¾“å‡ºï¼š2
è§£é‡Šï¼š
ç¬¬ 1 ä¸ªä¼˜ç¾çš„æ’åˆ—æ˜¯ [1,2]ï¼š
    - perm[1] = 1 èƒ½è¢« i = 1 æ•´é™¤
    - perm[2] = 2 èƒ½è¢« i = 2 æ•´é™¤
ç¬¬ 2 ä¸ªä¼˜ç¾çš„æ’åˆ—æ˜¯ [2,1]:
    - perm[1] = 2 èƒ½è¢« i = 1 æ•´é™¤
    - i = 2 èƒ½è¢« perm[2] = 1 æ•´é™¤
```

```
è¾“å…¥ï¼šn = 1
è¾“å‡ºï¼š1
```

**æç¤ºï¼š**

- `1 <= n <= 15`

**è§£é¢˜æ€è·¯ï¼š**

- è§‚å¯Ÿå‘ç°è¿™æ˜¯ä¸€é“æ’åˆ—é¢˜å‹ï¼Œæ ¹æ®åˆ¤æ–­æ¡ä»¶çš„ä¸åŒï¼Œæ•°æ®å¯ä»¥é¢ å€’å‡ºç°ï¼Œä¾‹å¦‚`[1,2]`å’Œ`[2,1]`
- è€ƒè™‘`dfs`ç»“æŸæ¡ä»¶ï¼šå·²ç»ä½¿ç”¨äº†`n`ä¸ªæ•°ï¼Œå°±å¯ä»¥è®©`res++`äº†ï¼Œå› ä¸ºåªæœ‰ç¬¦åˆæ¡ä»¶çš„æ‰ä¼šè¿›å…¥æ–°ä¸€è½®éå†
- å¯¹äºæ’åˆ—é¢˜å‹ï¼Œåœ¨`dfs`çš„éå†ä¸­è¦ä»å¤´å¼€å§‹ï¼Œæœ¬é¢˜è¦æ±‚ä¸‹æ ‡ä»`1`å¼€å§‹ï¼Œé‚£æˆ‘ä»¬å°±è®©`i`ä»`1`å¼€å§‹éå†
- `dfs`çš„éå†æ–¹å¼
  - åˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œæ»¡è¶³å°±æ”¹å˜å½“å‰ä½ç½®çš„çŠ¶æ€å¹¶ä»ä¸‹ä¸€ä¸ªä½ç½®è¿›å…¥æ–°ä¸€è½®éå†
  - é€€å‡ºéå†åï¼Œå†æ¬¡æ”¹å˜å½“å‰çŠ¶æ€ä½ç½®
  - ç»§ç»­`for`å¾ªç¯

**ä»£ç ï¼š**

```cpp
class Solution {
public:
    int res = 0;
    bool status[16];

    void dfs(int n, int number){
        if(number == n + 1){ // æ•°ç»„å¡«æ»¡ï¼Œå°†res++
            res++;
            return;
        }
        for(int i = 1; i <= n; i ++){ // å› ä¸ºæ˜¯æ’åˆ—é—®é¢˜ï¼Œæ‰€ä»¥ä»å¤´å¼€å§‹éå†
            if(!status[i] && (i % number == 0 || number % i == 0)){ // å¦‚æœæ»¡è¶³æ¡ä»¶
                status[i] = true; // æ”¹å˜ä½ç½®çŠ¶æ€
                dfs(n, number + 1); // ä»ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹æ–°ä¸€è½®éå†
                status[i] = false; // æ”¹å˜ä½ç½®çŠ¶æ€
            }
        }
    }

    int countArrangement(int n) {
        dfs(n, 1);
        return res;
    }
};
```





### 842. å°†æ•°ç»„æ‹†åˆ†æˆæ–æ³¢é‚£å¥‘åºåˆ— <span id="842"></span>

**éš¾åº¦ï¼š**<font color=#ffa119>ä¸­ç­‰</font>

**é¢˜ç›®ï¼š**

ç»™å®šä¸€ä¸ªæ•°å­—å­—ç¬¦ä¸² `num`ï¼Œæ¯”å¦‚ `"123456579"`ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒåˆ†æˆã€Œæ–æ³¢é‚£å¥‘å¼ã€çš„åºåˆ—`[123, 456, 579]`ã€‚

å½¢å¼ä¸Šï¼Œ**æ–æ³¢é‚£å¥‘å¼** åºåˆ—æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°åˆ—è¡¨ `f`ï¼Œä¸”æ»¡è¶³ï¼š

- `0 <= f[i] < 231` ï¼Œï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªæ•´æ•°éƒ½ç¬¦åˆ **32 ä½** æœ‰ç¬¦å·æ•´æ•°ç±»å‹ï¼‰
- `f.length >= 3`
- å¯¹äºæ‰€æœ‰çš„`0 <= i < f.length - 2`ï¼Œéƒ½æœ‰ `f[i] + f[i + 1] = f[i + 2]`

å¦å¤–ï¼Œè¯·æ³¨æ„ï¼Œå°†å­—ç¬¦ä¸²æ‹†åˆ†æˆå°å—æ—¶ï¼Œæ¯ä¸ªå—çš„æ•°å­—ä¸€å®šä¸è¦ä»¥é›¶å¼€å¤´ï¼Œé™¤éè¿™ä¸ªå—æ˜¯æ•°å­— `0` æœ¬èº«ã€‚

è¿”å›ä» `num` æ‹†åˆ†å‡ºæ¥çš„ä»»æ„ä¸€ç»„æ–æ³¢é‚£å¥‘å¼çš„åºåˆ—å—ï¼Œå¦‚æœä¸èƒ½æ‹†åˆ†åˆ™è¿”å› `[]`ã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼šnum = "1101111"
è¾“å‡ºï¼š[11,0,11,11]
è§£é‡Šï¼šè¾“å‡º[110,1,111]ä¹Ÿå¯ä»¥ã€‚
```

```
è¾“å…¥: num = "112358130"
è¾“å‡º: []
è§£é‡Š: æ— æ³•æ‹†åˆ†ã€‚
```

```
è¾“å…¥ï¼š"0123"
è¾“å‡ºï¼š[]
è§£é‡Šï¼šæ¯ä¸ªå—çš„æ•°å­—ä¸èƒ½ä»¥é›¶å¼€å¤´ï¼Œå› æ­¤ "01"ï¼Œ"2"ï¼Œ"3" ä¸æ˜¯æœ‰æ•ˆç­”æ¡ˆã€‚
```

**æç¤ºï¼š**

- `1 <= num.length <= 200`
- `num` ä¸­åªå«æœ‰æ•°å­—

**è§£é¢˜æ€è·¯ï¼š**

- è¿™é“é¢˜å’Œç´¯åŠ æ•°ç±»ä¼¼ï¼Œæ€è·¯ç›¸åŒï¼Œä½œä¸ºæ–æ³¢é‚£å¥‘åºåˆ—ç±»å‹é¢˜ï¼Œåªéœ€è¦åˆ¤æ–­å‰ä¸¤ä¸ªæ•°çš„ä½ç½®ï¼Œå°±å¯ä»¥éªŒè¯æ•´ä¸ªåºåˆ—
- å› æ­¤æˆ‘ä»¬è¿˜æ˜¯å»éå†`second`å’Œ`sum`çš„å¼€å§‹ä½ç½®ï¼ŒåŠ ä¸€ä¸ª`second <= 11`å’Œ`sum <= second + 11`æ¥å‰ªæï¼Œå› ä¸ºæ¡ä»¶ä¸­è¯´æ˜æ¯å—çš„æ•°å­—åœ¨intèŒƒå›´å†…
- è¿™é“é¢˜å†™çš„ç¨å¾®å¤æ‚äº†ä¸€ç‚¹ï¼Œå› ä¸ºæƒ³è¦å·©å›ºä¸€ä¸‹ç´¯åŠ æ•°å­¦åˆ°çš„å¤§æ•°åŠ æ³•çš„çŸ¥è¯†
- ç®€åŒ–ç‰ˆ
  - å»æ‰å¤§æ•°åŠ æ³•éƒ¨åˆ†ï¼Œä¿ç•™`string`è½¬`long long`å³å¯
  - å› ä¸ºæ¯ä¸ªæ•°éƒ½é™å®šåœ¨äº†`int`å†…ï¼Œæ‰€ä»¥å¤§æ•°åŠ æ³•æ²¡å¿…è¦

**ä»£ç ï¼š**

```cpp
class Solution {
public:
    vector<int> res;
    bool status;
    long long getNum(string num){ // stringè½¬longlong
        int len = num.size();
        long long resnum = 0;
        for(int i = 0; i < len; i ++){
            resnum = resnum * 10 + num[i] - '0';
            if(resnum > INT_MAX) return -1; // å¦‚æœè¶…å‡ºintçš„èŒƒå›´ï¼Œè¿”å›-1
        }
        return resnum;
    }

    string addNum(string a, string b){ // å¤§æ•°åŠ æ³•
        int n1 = a.size()-1;
        int n2 = b.size()-1;
        int carry = 0;
        string ans;

        while(n1>=0||n2>=0||carry>0){
            int t1=n1>=0?a[n1--]-'0':0;
            int t2=n2>=0?b[n2--]-'0':0;
            ans+=(t1+t2+carry)%10+'0';
            carry=(t1+t2+carry)/10;
        }

        reverse(ans.begin(),ans.end());
        return ans;
    }

    void dfs(string num, int first, int second, int sum){ // numï¼Œå­—ç¬¦ä¸²ï¼›firstï¼Œsecondï¼Œsumï¼Œç¬¬ä¸€ä¸ªæ•°ã€ç¬¬äºŒä¸ªã€å’Œçš„é¦–åœ°å€
        if(sum == num.size()){ // ç»“æŸæ¡ä»¶ï¼Œå’Œçš„é¦–åœ°å€ä¸ºnumçš„ç»“å°¾
            status = true;
            return;
        }
        if(num[first] == '0' && second - first > 1) return; // åˆ¤æ–­æ˜¯å¦ä¸ºéæ³•å­—ç¬¦
        if(num[second] == '0' && sum - second > 1) return;

        string firststr = num.substr(first, second - first);
        string secondstr = num.substr(second, sum - second);
        string tempsum = addNum(firststr, secondstr);
        long long temp = getNum(tempsum);
        if(temp == -1) return; // å¦‚æœtempè¶…å‡ºintèŒƒå›´ï¼Œç»“æŸéå†
 
        if(tempsum.size() > num.size() - sum) return; // å¦‚æœä¸¤æ•°ä¹‹å’Œçš„é•¿åº¦å¤§äºå‰©ä½™é•¿åº¦ï¼Œç»“æŸéå†

        for(int i = 0; i < tempsum.size(); i ++){ // é€ä½æ¯”è¾ƒ
            if(tempsum[i] != num[sum + i]) return; // å¦‚æœæœ‰ä¸åŒçš„ä½ï¼Œç»“æŸéå†
        }
        res.push_back(temp); // å½“å‰å’Œæ»¡è¶³æ–æ³¢é‚£å¥‘åºåˆ—ï¼Œå‹å…¥res
        dfs(num, second, sum, sum + tempsum.size()); // è¿›å…¥ä¸‹ä¸€è½®éå†
    }

    vector<int> splitIntoFibonacci(string num) {
        int len = num.size(); // è®°å½•é•¿åº¦
        for(int second = 1; second < len && second <= 11; second++){ // ç¬¬ä¸€ä¸ªæ•°çš„é¦–åœ°å€ä¸€å®šæ˜¯0ï¼Œä¸ç”¨ç®¡ï¼Œåªéœ€è¦æ”¹å˜ç¬¬äºŒä¸ªæ•°çš„é¦–åœ°å€å³å¯ï¼Œ11æ˜¯å› ä¸ºè¦æ»¡è¶³intèŒƒå›´ï¼Œæå‰åšä¸€ä¸‹å‰ªæ
            for(int sum = second + 1; sum < len && sum <= second + 11; sum ++){
                long long firstnum = getNum(num.substr(0, second));
                long long secondnum = getNum(num.substr(second, sum - second));
                if(firstnum == -1 || secondnum == -1){ // åˆ¤æ–­æ˜¯å¦åœ¨intèŒƒå›´å†…
                    break;
                }
                res.push_back(firstnum); // å°†firstå’Œsecondå‹å…¥res
                res.push_back(secondnum);
                dfs(num, 0, second, sum); // è¿›å…¥éå†
                if(status){ // å¦‚æœåœ¨éå†ç»“æŸåï¼Œå­˜åœ¨ä¸€ç»„æ»¡è¶³æ¡ä»¶
                    return res; // è¿”å›res
                }
                res.clear(); // å¦‚æœä¸Šä¸€ç»„ä¸æ»¡è¶³æ¡ä»¶ï¼Œæ¸…ç©ºresï¼Œæ”¹å˜secondå’Œsumçš„é¦–åœ°å€è¿›è¡Œæ–°çš„éå†
            }
        }
        return res;
    }
};
```



### 1079. æ´»å­—å°åˆ· <span id="1079"></span>

**éš¾åº¦ï¼š**<font color=#ffa119>ä¸­ç­‰</font>

**é¢˜ç›®ï¼š**

ä½ æœ‰ä¸€å¥—æ´»å­—å­—æ¨¡ `tiles`ï¼Œå…¶ä¸­æ¯ä¸ªå­—æ¨¡ä¸Šéƒ½åˆ»æœ‰ä¸€ä¸ªå­—æ¯ `tiles[i]`ã€‚è¿”å›ä½ å¯ä»¥å°å‡ºçš„éç©ºå­—æ¯åºåˆ—çš„æ•°ç›®ã€‚

**æ³¨æ„ï¼š**æœ¬é¢˜ä¸­ï¼Œæ¯ä¸ªæ´»å­—å­—æ¨¡åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼š"AAB"
è¾“å‡ºï¼š8
è§£é‡Šï¼šå¯èƒ½çš„åºåˆ—ä¸º "A", "B", "AA", "AB", "BA", "AAB", "ABA", "BAA"ã€‚
```

```
è¾“å…¥ï¼š"AAABBC"
è¾“å‡ºï¼š188
```

```
è¾“å…¥ï¼š"V"
è¾“å‡ºï¼š1
```

**æç¤ºï¼š**

- `1 <= tiles.length <= 7`
- `tiles` ç”±å¤§å†™è‹±æ–‡å­—æ¯ç»„æˆ

**è§£é¢˜æ€è·¯ï¼š**

- å’Œå­é›†æ˜¯ç±»å‹é¢˜ï¼Œå°±æ˜¯è¦æ±‚å‡ºæ‰€æœ‰çš„ä¸é‡å¤éç©ºå­é›†ï¼Œå¯¹å­é›†è¿›è¡Œä¸€ä¸ªæ’åˆ—
- æ³¨æ„ç‚¹
  - ä¸é‡å¤ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æå‰å¯¹titlesè¿›è¡Œæ’åºï¼Œè¿™æ ·å¯ä»¥åšåˆ°è·³è¿‡é‡å¤å­—æ¯
  - æ’åˆ—ï¼Œå› æ­¤æ¯æ¬¡éå†æ—¶ä»å¤´å¼€å§‹
  - å¦‚æœå½“å‰å­—æ¯å’Œå‰ä¸€ä¸ªå­—æ¯ç›¸ç­‰ï¼Œä¸”å‰ä¸€ä¸ªå­—æ¯æ²¡æœ‰è¢«ä½¿ç”¨ï¼Œåˆ™å½“å‰å­—æ¯ä¹Ÿä¸èƒ½è¢«ä½¿ç”¨ã€‚å› ä¸ºæ‰€æœ‰çš„æƒ…å†µå·²ç»è¢«å‰ä¸€ä¸ªå­—æ¯éå†åˆ°äº†

**ä»£ç ï¼š**

```cpp
class Solution {
public:
    int res = 0;
    bool status[7]; // å®šä¹‰çŠ¶æ€æ•°ç»„ï¼Œè®°å½•å¯ç”¨æƒ…å†µ

    void dfs(string tiles){
        for(int i = 0; i < tiles.size(); i ++){ // å› ä¸ºæ˜¯æ’åˆ—é—®é¢˜ï¼Œä»å¤´å¼€å§‹éå†
            if(i > 0 && tiles[i] == tiles[i - 1] && status[i - 1] == false){ // å¦‚æœå½“å‰å­—æ¯å’Œå‰ä¸€ä¸ªå­—æ¯ç›¸åŒä¸”å‰ä¸€ä¸ªå­—æ¯ä¸ºå¯ç”¨çŠ¶æ€ï¼Œåˆ™å½“å‰å­—æ¯ä¸èƒ½ä½¿ç”¨ï¼›å› ä¸ºå‰ä¸€ä¸ªå­—æ¯å·²ç»å°†å•ä¸ªè¯¥å­—æ¯çš„æƒ…å†µå…¨éƒ¨åˆ—å‡º
                continue;
            }
            if(!status[i]){ // å¦‚æœè¯¥å­—æ¯å¯ç”¨
                status[i] = true; // æ”¹å˜çŠ¶æ€
                res++; 
                dfs(tiles); // è¿›å…¥æ–°ä¸€è½®éå†
                status[i] = false; // æ¢å¤çŠ¶æ€
            }
        }
    }

    int numTilePossibilities(string tiles) {
        sort(tiles.begin(), tiles.end()); // å¯¹titlesè¿›è¡Œæ’åºï¼Œè®©å­—æ¯æœ‰åºï¼Œæ–¹ä¾¿åç»­éå†å»é‡
        dfs(tiles); // è¿›å…¥éå†
        return res; // è¿”å›res
    }
};
```
