---
title: 第十章 数字视频编码原理与标准
date: 2022-04-10 22:23:15
permalink: /pages/8f891f/
categories: 
  - coursedoc
  - 多媒体
tags: 
  - 
---
# 数字视频编码原理与标准

## 1. 视频编码算法

### 1.1 编码原理

- 通过减少时间冗余来提高视频压缩编码的效率

- 视频图像分为三类：

  - I帧：帧内编码，利用图像内部的相关性进行压缩，为关键帧，典型算法为JPEG算法
  - P帧：帧间编码，施加预测编码的图像，为单向预测
  - B帧：帧间编码，施加双向预测编码的图像，为双向预测
### 1.2 算法框架
- 计算编码图像与预测图像之间的差值

  - 将待编码图像分割成若干块，然后以块为单位逐块进行相减运算
  - 通常块被分割为 16 * 16 像素的块，称为宏块
  - 流程为： 搜索最佳匹配宏块 --> 计算两者差分值  --> 对差分值进行正余弦变换 --> 行程压缩结果 --> 赫夫曼编码输出
- 关键处理步骤为：搜索最佳匹配宏块
  - 在参考图像中搜索最佳匹配宏块的计算过程：**运动估计**
  - 最佳匹配宏块基准位置的偏移量：**运动向量**
  - 根据运动向量将差分值补充到参考图像匹配宏块中去的过程：**运动补偿**



## 2. 运动搜索算法

### 2.1 基础知识

- 运动估计算法分类：
  - 块匹配法 （最常用）
  - 递归估计法
  - 贝叶斯估计法
  - 光流法
- 涉及到的问题：
  - 搜索起始点的选择
  - 匹配准则
  - 搜索过程

### 2.2 搜索起点的选择

- 以参考帧对应的 (0, 0) 位置为起点
  - 方法简单，但容易陷入局部最优
- 预测起点位置
  - 基于SAD值的起点预测方法 --> 改进：利用运动矢量的相关性来预测起点
  - 利用相邻块和相邻帧对应块的运动矢量来预测当前块的搜索起点
  - 基于相邻运动矢量相等的起点预测方法

### 2.3 匹配准则

- 绝对差之和  :  $ SAD = \sum_{i=0}^{15}\sum_{j=0}^{15} | f(i,j) - g(i-d_x,j-d_y) |$
  - i，j 是编码图像分块的相对坐标
  - *f(i, j)*是编码图像分块
  - $d_x,d_y$是运动向量
  - g是参考图像分块

- 均方误差  :  $MSE=\frac{1}{M \times N}\sum_{i=0}^{15}\sum_{j=0}^{15}[f(i,j) - g(i-d_x,j-d_y)]^2$
  - M和N时图像分块的水平与垂直大小，一般情况下均为16，即宏块

- 平均绝对差  :  $MAD=\frac{1}{M \times N}\sum_{i=0}^{15}\sum_{j=0}^{15}|f(i,j) - g(i-d_x,j-d_y)|$

### 2.4 运动搜索算法

- 全搜索法 **FS**
  - 也称穷尽搜索法，对搜索范围内所有可能的候选位置计算SAD，从中找出最小的SAD
  - 对应偏移量即为所求运动向量，找到的匹配块必为全局最优值
  - 基本过程
    - 从原点出发，按顺时针方向由近及远，逐个计算SAD
    - 遍历完所有点后，找到最小的SAD
- 二维对数法 **TDL**
  - 快速算法，分多个阶段搜索，并逐次减小搜索范围知道MSE不能再减小而结束
  - 不能保证找到全局最优点
  - 基本过程
    - 从原点开始对十字形分布的点群进行搜索
    - 如果MSE最小点出现在边缘，则更换中心点为该点并继续搜索
    - 如果MSE最小点出现在中心，则将步长减半继续搜索

- 三步搜索法 **TSS**
  - 较为简单且健壮，使用广泛
  - 由粗到细的搜索模式
  - 基本过程
    - 从原点开始取最大搜索长度的一半为步长，取周围八个点为点群进行匹配计算
    - 选取MAD值最小点为新的中心点，并将搜索步长减半
    - 重复减半搜索的次数不超过三次




## 3. 视频编码国际标准

- **P262**
